import datetime
import openai
from openai import OpenAI
from sqlalchemy import delete, select, insert
from fsm import *   
import httpx
from os import getenv
from config import settings
from keyboards import *
from models import User, Train, InfoTraining, ReflectAnswers, PomodoroUser
from asyncio import sleep
from aiogram.types import InputFile
from aiogram.dispatcher import FSMContext
from dotenv import load_dotenv, find_dotenv
from sqlalchemy.ext.asyncio import create_async_engine, async_sessionmaker
from aiogram import Bot, Dispatcher, executor, types
from aiogram.contrib.fsm_storage.memory import MemoryStorage

storage = MemoryStorage()

client = openai.OpenAI(
    api_key=settings.openai.token,
    base_url="https://api.proxyapi.ru/openai/v1",
)

engine = create_async_engine(url=settings.db.url, echo=settings.db.echo)

session_factory = async_sessionmaker(
    bind=engine,
    autoflush=False,
    autocommit=False,
    expire_on_commit=False
)

bot: Bot = Bot(token=settings.bot.token)
dp: Dispatcher = Dispatcher(bot=bot, storage=storage)

async def on_startup(dp: Dispatcher):
    from models import init_db
    await init_db(engine)
    
async def ask_gpt(messages: list):
    chat_completion = client.chat.completions.create(
            model="gpt-4o",
            messages=messages,
    )

    response_content = chat_completion.choices[0].message.content
    return response_content


@dp.callback_query_handler(text="main_menu")
async def return_to_main_menu(call: types.CallbackQuery):
    await call.message.answer("""
–ü—Ä–∏–≤–µ—Ç! –Ø ‚Äî MetacogniMind_bot, —Ç–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏ –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è ‚Äî –∫–ª—é—á–µ–≤—ã—Ö —É–º–µ–Ω–∏–π –≤ —ç–ø–æ—Ö—É –ò–ò. ü§ñ
–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –æ—Å–æ–∑–Ω–∞–≤–∞—Ç—å, –∫–∞–∫ —Ç—ã —É—á–∏—à—å—Å—è, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º—ã—Å–ª–∏, –≤—ã–±–∏—Ä–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –º—ã—Å–ª–∏—Ç—å –≥–ª—É–±–∂–µ.
üîπ –°–æ–∑–¥–∞—Ç–µ–ª—å ‚Äî –ï–ª–µ–Ω–∞ –ó–∞–ø–æ–¥–æ–π–Ω–∏–∫–æ–≤–∞, QA Engineer, –Ω–µ–π—Ä–æ–ø—Å–∏—Ö–æ–ª–æ–≥, —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º—É –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥—É –∏ –∞–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ AI & Educationlab - https://t.me/Ai_educationlab: –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏ –æ—Ç —à–∫–æ–ª—å–Ω–∏–∫–∞ –¥–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è.
üìå –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞. 
üí° –î–ª—è –Ω–∞—á–∞–ª–∞:
–ü—Ä–æ–π–¥–∏ –≤—Ö–æ–¥–Ω—ã–µ —Ç–µ—Å—Ç—ã ‚Äî –æ–Ω–∏ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã, –Ω–æ –ø–æ–º–æ–≥—É—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–≤–æ–π —É—Ä–æ–≤–µ–Ω—å —Å–µ–π—á–∞—Å –∏ —á–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞.
üß† –ß—Ç–æ —Ç—ã –æ—Å–≤–æ–∏—à—å:
‚Äî –†–µ—Ñ–ª–µ–∫—Å–∏—é –∏ —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É
‚Äî –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—É—á–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
‚Äî –û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å –∏ —Ç–∞–π–º-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
‚Äî –ù–∞–≤—ã–∫–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º
‚ÑπÔ∏è –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∫–æ–º–∞–Ω–¥—ã ‚Äî –≤ —Ä–∞–∑–¥–µ–ª–µ /help
–ï—Å–ª–∏ —É —Ç–µ–±—è –ø—Ä–æ–±–ª–µ–º—ã —Å –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π ‚Äî –Ω–∞–ø–∏—à–∏ –≤ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —á–∞—Ç: –æ–ø–∏—à–∏ —á—Ç–æ —Ç–µ–±—è –±–µ—Å–ø–æ–∫–æ–∏—Ç –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ (/psych_chat).
üöÄ –•–æ—á–µ—à—å —Ä–∞–∑–≤–∏–≤–∞—Ç—å –º—ã—à–ª–µ–Ω–∏–µ –±—É–¥—É—â–µ–≥–æ? –ù–∞—á–Ω–∏ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ —Å —Ç–µ—Å—Ç–æ–≤ –Ω–∏–∂–µ –∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏ –∏—Ö üëá
    <a href="https://onlinetestpad.com/s/academic-text-skills">–¢–µ—Å—Ç 1</a>
    <a href="https://onlinetestpad.com/t/borzova-text-test">–¢–µ—Å—Ç 2</a>
    <a href="https://onlinetestpad.com/t/starkey2004-lutsenko2014">–¢–µ—Å—Ç 3</a>
    <a href="https://onlinetestpad.com/t/arpov-reflection-test">–¢–µ—Å—Ç 4</a>
    <a href="https://onlinetestpad.com/t/Metacognition-activity">–¢–µ—Å—Ç 5</a>
    <a href="https://onlinetestpad.com/t/merkulova-ak-test">–¢–µ—Å—Ç 6</a>""", parse_mode="html", reply_markup=start_keyboard())


@dp.message_handler(commands="start")
async def start_command(message: types.Message):
    async with session_factory() as session:
        stmt = select(User).where(User.user_id == message.from_user.id)
        res = await session.execute(statement=stmt)
        if res.scalar() is None:
            stmt = insert(User).values(user_id=message.from_user.id, datetime="2023-01-01")
            await session.execute(statement=stmt)
            await session.commit()
            await call.message.answer("""
–ü—Ä–∏–≤–µ—Ç! –Ø ‚Äî MetacogniMind_bot, —Ç–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏ –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è ‚Äî –∫–ª—é—á–µ–≤—ã—Ö —É–º–µ–Ω–∏–π –≤ —ç–ø–æ—Ö—É –ò–ò. ü§ñ
–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –æ—Å–æ–∑–Ω–∞–≤–∞—Ç—å, –∫–∞–∫ —Ç—ã —É—á–∏—à—å—Å—è, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º—ã—Å–ª–∏, –≤—ã–±–∏—Ä–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –º—ã—Å–ª–∏—Ç—å –≥–ª—É–±–∂–µ.
üîπ –°–æ–∑–¥–∞—Ç–µ–ª—å ‚Äî –ï–ª–µ–Ω–∞ –ó–∞–ø–æ–¥–æ–π–Ω–∏–∫–æ–≤–∞, QA Engineer, –Ω–µ–π—Ä–æ–ø—Å–∏—Ö–æ–ª–æ–≥, —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º—É –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥—É –∏ –∞–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ AI & Educationlab - https://t.me/Ai_educationlab: –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏ –æ—Ç —à–∫–æ–ª—å–Ω–∏–∫–∞ –¥–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è.
üìå –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞. 
üí° –î–ª—è –Ω–∞—á–∞–ª–∞:
–ü—Ä–æ–π–¥–∏ –≤—Ö–æ–¥–Ω—ã–µ —Ç–µ—Å—Ç—ã ‚Äî –æ–Ω–∏ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã, –Ω–æ –ø–æ–º–æ–≥—É—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–≤–æ–π —É—Ä–æ–≤–µ–Ω—å —Å–µ–π—á–∞—Å –∏ —á–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞.
üß† –ß—Ç–æ —Ç—ã –æ—Å–≤–æ–∏—à—å:
‚Äî –†–µ—Ñ–ª–µ–∫—Å–∏—é –∏ —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É
‚Äî –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—É—á–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
‚Äî –û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å –∏ —Ç–∞–π–º-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
‚Äî –ù–∞–≤—ã–∫–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º
‚ÑπÔ∏è –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∫–æ–º–∞–Ω–¥—ã ‚Äî –≤ —Ä–∞–∑–¥–µ–ª–µ /help
–ï—Å–ª–∏ —É —Ç–µ–±—è –ø—Ä–æ–±–ª–µ–º—ã —Å –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π ‚Äî –Ω–∞–ø–∏—à–∏ –≤ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —á–∞—Ç: –æ–ø–∏—à–∏ —á—Ç–æ —Ç–µ–±—è –±–µ—Å–ø–æ–∫–æ–∏—Ç –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ (/psych_chat).
üöÄ –•–æ—á–µ—à—å —Ä–∞–∑–≤–∏–≤–∞—Ç—å –º—ã—à–ª–µ–Ω–∏–µ –±—É–¥—É—â–µ–≥–æ? –ù–∞—á–Ω–∏ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ —Å —Ç–µ—Å—Ç–æ–≤ –Ω–∏–∂–µ –∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏ –∏—Ö üëá
    <a href="https://onlinetestpad.com/s/academic-text-skills">–¢–µ—Å—Ç 1</a>
    <a href="https://onlinetestpad.com/t/borzova-text-test">–¢–µ—Å—Ç 2</a>
    <a href="https://onlinetestpad.com/t/starkey2004-lutsenko2014">–¢–µ—Å—Ç 3</a>
    <a href="https://onlinetestpad.com/t/arpov-reflection-test">–¢–µ—Å—Ç 4</a>
    <a href="https://onlinetestpad.com/t/Metacognition-activity">–¢–µ—Å—Ç 5</a>
    <a href="https://onlinetestpad.com/t/merkulova-ak-test">–¢–µ—Å—Ç 6</a>""", parse_mode="html", reply_markup=start_keyboard())
            
        else:
            await message.answer("""
–ü—Ä–∏–≤–µ—Ç! –Ø ‚Äî MetacogniMind_bot, —Ç–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏ –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è ‚Äî –∫–ª—é—á–µ–≤—ã—Ö —É–º–µ–Ω–∏–π –≤ —ç–ø–æ—Ö—É –ò–ò. ü§ñ
–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –æ—Å–æ–∑–Ω–∞–≤–∞—Ç—å, –∫–∞–∫ —Ç—ã —É—á–∏—à—å—Å—è, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º—ã—Å–ª–∏, –≤—ã–±–∏—Ä–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –º—ã—Å–ª–∏—Ç—å –≥–ª—É–±–∂–µ.
üîπ –°–æ–∑–¥–∞—Ç–µ–ª—å ‚Äî –ï–ª–µ–Ω–∞ –ó–∞–ø–æ–¥–æ–π–Ω–∏–∫–æ–≤–∞, QA Engineer, –Ω–µ–π—Ä–æ–ø—Å–∏—Ö–æ–ª–æ–≥, —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º—É –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥—É –∏ –∞–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ AI & Educationlab - https://t.me/Ai_educationlab: –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏ –æ—Ç —à–∫–æ–ª—å–Ω–∏–∫–∞ –¥–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è.
üìå –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞. 
üí° –î–ª—è –Ω–∞—á–∞–ª–∞:
–ü—Ä–æ–π–¥–∏ –≤—Ö–æ–¥–Ω—ã–µ —Ç–µ—Å—Ç—ã ‚Äî –æ–Ω–∏ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã, –Ω–æ –ø–æ–º–æ–≥—É—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–≤–æ–π —É—Ä–æ–≤–µ–Ω—å —Å–µ–π—á–∞—Å –∏ —á–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞.
üß† –ß—Ç–æ —Ç—ã –æ—Å–≤–æ–∏—à—å:
‚Äî –†–µ—Ñ–ª–µ–∫—Å–∏—é –∏ —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É
‚Äî –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—É—á–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
‚Äî –û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å –∏ —Ç–∞–π–º-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
‚Äî –ù–∞–≤—ã–∫–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º
‚ÑπÔ∏è –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∫–æ–º–∞–Ω–¥—ã ‚Äî –≤ —Ä–∞–∑–¥–µ–ª–µ /help
–ï—Å–ª–∏ —É —Ç–µ–±—è –ø—Ä–æ–±–ª–µ–º—ã —Å –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π ‚Äî –Ω–∞–ø–∏—à–∏ –≤ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —á–∞—Ç: –æ–ø–∏—à–∏ —á—Ç–æ —Ç–µ–±—è –±–µ—Å–ø–æ–∫–æ–∏—Ç –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ (/psych_chat).""", reply_markup=start_keyboard())


    await sleep(90 * 24 * 60 * 60)

    await message.answer("""–ü—Ä–∏–≤–µ—Ç!
–£ —Ç–µ–±—è –≤—Å–µ –æ—Ç–ª–∏—á–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è. –¢—ã –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è —É–∂–µ 3 –º–µ—Å—è—Ü–∞, —Å—É–ø–µ—Ä!
–ù–∞—Å—Ç–∞–ª–æ –≤—Ä–µ–º—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å, –ø—Ä–æ–π–¥—è –∑–∞–Ω–æ–≤–æ —Ç–µ—Å—Ç—ã. –°–º–µ–ª–æ –ø–∏—à–∏ /retest""", parse_mode="html")




@dp.message_handler(commands="courses")
async def courses_command(message: types.Message):
    await message.answer("""
üéì –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å—ã (–∑–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å –ø–æ–¥–æ–±—Ä–∞—Ç—å —Å–µ–±–µ –∫—É—Ä—Å—ã, –≤ —Ç–æ–º —á–∏—Å–ª–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ):\n\n
üìò [Stepik](https://stepik.org/)\n
üìò [–ê–∫–∞–¥–µ–º–∏–∫–∞](https://academika.ru/catalog/)\n
üìò [–õ–µ–∫—Ç–æ—Ä–∏—É–º](https://www.lektorium.tv/)\n
üí° [–Ø–Ω–¥–µ–∫—Å –ü—Ä–∞–∫—Ç–∏–∫—É–º](https://practicum.yandex.ru/)\n
üí° [Coursera](https://www.coursera.org/)\n
üìñ [OpenEdu](https://openedu.ru/)\n\n
üéì –ö—É—Ä—Å—ã –≤–µ–¥—É—â–∏—Ö —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤:\n
üèõ [–¢–æ–º—Å–∫–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç (–¢–ì–£)](https://mooc.tsu.ru/)\n
üìö [–ú–ì–£ ‚Äì –û—Ç–∫—Ä—ã—Ç–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ](https://openedu.ru/university/msu/)\n
üè´ [–í—ã—Å—à–∞—è —à–∫–æ–ª–∞ —ç–∫–æ–Ω–æ–º–∏–∫–∏ (–í–®–≠) ‚Äì –û–Ω–ª–∞–π–Ω-–∫—É—Ä—Å—ã](https://elearning.hse.ru/)\n\n

üìå –í—ã–±–µ—Ä–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –∏ –Ω–∞—á–Ω–∏ –æ–±—É—á–µ–Ω–∏–µ! üöÄ""", parse_mode="Markdown", reply_markup=main_menu_keyboard())



@dp.message_handler(commands="resources")
async def resources_command(message: types.Message):
     await message.answer("""
üìö –ü–æ–ª–µ–∑–Ω—ã–µ –Ω–∞—É—á–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (–∑–¥–µ—Å—å —Ç—ã –Ω–∞–π–¥–µ—à—å –º–Ω–æ–≥–æ –ø–æ–ª–µ–∑–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è):\n\n
üîé [Google Scholar](https://scholar.google.com/)\n
üìñ [Elicit](https://elicit.org/)\n
üìñ [SciSpace](https://www.scispace.com/)\n
üìö [eLibrary](https://elibrary.ru/)\n
üìÑ [Zotero](https://www.zotero.org/)\n
üìÑ [Mendeley](https://www.mendeley.com/?interaction_required=true)\n
üìö [Connected Papers](https://connectedpapers.com/)\n
üìö [Semantic Scholar](https://www.semanticscholar.org/)\n
üîé [OpenAlex](https://openalex.org/)\n
üîé [ScienceDirect](https://www.sciencedirect.com/)\n
üîé [Paraphrase Online](https://www.paraphrase-online.com/)\n
üî¨ [PubMed](https://pubmed.ncbi.nlm.nih.gov/)\n
üìÑ [SpringerLink](https://link.springer.com/)\n
üß† [ResearchGate](https://www.researchgate.net/)\n\n

üìå –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–∏ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞—É—á–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π, —Ñ–æ—Ä–º–∏—Ä—É–π –∏–¥–µ–∏.
""", parse_mode="Markdown", reply_markup=main_menu_keyboard())




@dp.callback_query_handler(text_startswith="s:")
async def start_keyboard_handler(call: types.CallbackQuery, state: FSMContext):
    dat = call.data.split(":")[1]

    if dat == "help":
        await help_cmd(message=call.message)

    if dat == "metamega":
        await metamega_quiz_handler(call)

    if dat == "pomodoro":
        await pomodoro_logic(message=call.message, user_id=call.from_user.id)

    if dat == "metakog":
        await train_start_cmd(message=call.message, state=state)
    
    if dat == "info":
        await info_training_command(message=call.message, state=state)
    
    if dat == "reflect":
        await reflect_command(message=call.message, state=state)
    
    if dat == "psycho":
        await psych_chat(message=call.message, state=state)
    
    if dat == "retest":
        await retest_logic(message=call.message, user_id=call.from_user.id)
    
    if dat == "profile":
        await profile_logic(message=call.message, user_id=call.from_user.id)

    if dat == "courses":
        await courses_command(message=call.message)

    if dat == "resources":
        await resources_command(message=call.message)


@dp.message_handler(commands="help")
async def help_cmd(message: types.Message):
    await message.answer("""–°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –∏ –∫–Ω–æ–ø–æ–∫ –≤ –±–æ—Ç–µ:  
–í–∞–∂–Ω–æ: /s (–°–¢–û–ü) - –≤–≤–µ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—É /s –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –µ—Å–ª–∏ –ù–ï –∑–∞–≤–µ—Ä—à–∏–ª–∏ —Ç—Ä–µ–Ω–∏–Ω–≥ –∏ –∑–∞–±—ã–ª–∏ –æ–± —ç—Ç–æ–º (–∫–æ–≥–¥–∞ –∫–Ω–æ–ø–∫–∏ –≤ —á–∞—Ç-–±–æ—Ç–µ –Ω–µ –∞–∫—Ç–∏–≤–Ω—ã).
üïí Pomodoro-—Ç–∞–π–º–µ—Ä
–î–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–π —É—á–µ–±—ã. –í–∫–ª—é—á–∏ —Ç–∞–π–º–µ—Ä ‚Äî –∏ —Ä–∞–±–æ—Ç–∞–π —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ.
–ß—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω–æ –Ω–∞–∂–∞—Ç—å Pomodoro-—Ç–∞–π–º–µ—Ä.
üß† –ú–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–π —Ç—Ä–µ–Ω–∏–Ω–≥
–†–∞–∑–≤–∏–≤–∞–π –≤–Ω–∏–º–∞–Ω–∏–µ, –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ. –ü—Ä–æ—Ö–æ–¥–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ ‚Äî 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é.
üìö –¢—Ä–µ–Ω–∏–Ω–≥ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
–ù–∞—É—á–∏—Å—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –º—ã—Å–ª–∏—Ç—å, —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –∑–∞–¥–∞–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –≥–ª–∞–≤–Ω–æ–µ.
ü™û –†–µ—Ñ–ª–µ–∫—Å–∏—è
–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è –∏–ª–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π, —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –∞ —á—Ç–æ –Ω–µ—Ç. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —É—á–∏—Ç—å—Å—è –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ.
üí¨ –ß–∞—Ç —Å –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º
–ï—Å–ª–∏ —á—É–≤—Å—Ç–≤—É–µ—à—å —Å—Ç—Ä–µ—Å—Å –∏–ª–∏ –ø–æ—Ç–µ—Ä—é –º–æ—Ç–∏–≤–∞—Ü–∏–∏ ‚Äî –Ω–∞–ø–∏—à–∏ –≤ —á–∞—Ç /psych_chat. –û–ø–∏—à–∏ —Å–∏—Ç—É–∞—Ü–∏—é –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ.
–ß—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∏–∞–ª–æ–≥, —Å–Ω–æ–≤–∞ –≤–≤–µ–¥–∏ /psych_chat. –ù–µ —É–∫–∞–∑—ã–≤–∞–π –§–ò–û.
üë§ –ü—Ä–æ—Ñ–∏–ª—å
–°–º–æ—Ç—Ä–∏ —Å–≤–æ—é –¥–∏–Ω–∞–º–∏–∫—É –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å ‚Äî –≤—Å—ë –ø–æ –ø–æ–ª–æ—á–∫–∞–º (–Ω—É–∂–Ω–æ –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å –æ—Ç–≤–µ—Ç).
üìò –ö—É—Ä—Å—ã –∏ —Ä–µ—Å—É—Ä—Å—ã
–ü–æ–¥–±–æ—Ä–∫–∏ –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å–æ–≤ –∏ –ø–æ–ª–µ–∑–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è.
üß© MetamegaQuiz
–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–≤–∏–∑—ã –ø–æ —Ç–µ–º–∞–º: –æ—Ç –∞–ª–≥–µ–±—Ä—ã –¥–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏. –í–æ–ø—Ä–æ—Å—ã –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –ø–æ–¥ —Ç–≤–æ–π —É—Ä–æ–≤–µ–Ω—å ‚Äî —Ç—Ä–µ–Ω–∏—Ä—É–π –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ.
üß™ –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ
–ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞ –ø—Ä–æ–π–¥–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–≤–æ–π —Ä–æ—Å—Ç.
üìå –°–æ–≤–µ—Ç: –Ω–∞—á–Ω–∏ —Å —Ç–µ—Å—Ç–æ–≤ ‚Äî /test
–ó–∞–Ω–∏–º–∞–π—Å—è 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é: —Ç—Ä–µ–Ω–∏–Ω–≥, —Ä–∞–±–æ—Ç–∞ —Å –∏–Ω—Ñ–æ, —Ä–µ—Ñ–ª–µ–∫—Å–∏—è
–ò –Ω–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ Pomodoro –∏ –ª–∏—á–Ω–æ–≥–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∞ ‚è±Ô∏è""", parse_mode="HTML", reply_markup=main_menu_keyboard())


@dp.message_handler(commands="pomodoro")
async def pomodoro_CMD(message: types.Message):
    await pomodoro_logic(message=message, user_id=message.from_user.id)



async def pomodoro_logic(message: types.Message, user_id: int):
    async with session_factory() as session:
        stmt = select(PomodoroUser).where(PomodoroUser.user_id == user_id)
        user = await session.execute(statement=stmt)
        user = user.scalar()
        await session.commit()
    print(user)
    if user is not None:
        async with session_factory() as session:
            stmt = delete(PomodoroUser).where(PomodoroUser.user_id == user_id)
            await session.execute(statement=stmt)
            await session.commit()
            await message.answer("‚èπ Pomodoro-—Ç–∞–π–º–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ï—Å–ª–∏ —Ö–æ—á–µ—à—å —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å, –Ω–∞–ø–∏—à–∏ /pomodoro", reply_markup=main_menu_keyboard())
            return
    if user is None:
        async with session_factory() as session:
            stmt = insert(PomodoroUser).values(user_id=user_id)
            user = await session.execute(statement=stmt)
            await session.commit()

            await message.answer("üçÖ Pomodoro-—Ç–∞–π–º–µ—Ä –∑–∞–ø—É—â–µ–Ω! –†–∞–±–æ—Ç–∞–π 25 –º–∏–Ω—É—Ç, –∑–∞—Ç–µ–º –±—É–¥–µ—Ç 5 –º–∏–Ω—É—Ç –æ—Ç–¥—ã—Ö–∞.")
            await sleep(25 * 60)
            async with session_factory() as session:
                stmt = select(PomodoroUser).where(PomodoroUser.user_id == user_id)
                user = await session.execute(statement=stmt)
                user = user.scalar()
            if user is None:
                print("3")
                return
            
            await message.answer("‚è≥ –ü–µ—Ä–µ—Ä—ã–≤ 5 –º–∏–Ω—É—Ç! –û—Ç–¥–æ—Ö–Ω–∏ –∏ —Ä–∞—Å—Å–ª–∞–±—å—Å—è. ‚òï")
            await sleep(5 * 60)

            async with session_factory() as session:
                stmt = select(PomodoroUser).where(PomodoroUser.user_id == user_id)
                user = await session.execute(statement=stmt)
                user = user.scalar()
            if user is None:
                return
            
            await message.answer("üöÄ –ù–æ–≤—ã–π Pomodoro-—Ü–∏–∫–ª! –†–∞–±–æ—Ç–∞–π –µ—â–µ 25 –º–∏–Ω—É—Ç.")
            await sleep(25 * 60)

            async with session_factory() as session:
                stmt = select(PomodoroUser).where(PomodoroUser.user_id == user_id)
                user = await session.execute(statement=stmt)
                user = user.scalar()
            if user is None:
                return
            
            await message.answer("‚è≥ –ü–µ—Ä–µ—Ä—ã–≤ 5 –º–∏–Ω—É—Ç! –û—Ç–¥–æ—Ö–Ω–∏ –∏ —Ä–∞—Å—Å–ª–∞–±—å—Å—è. ‚òï")
            await sleep(5 * 60)

            
            async with session_factory() as session:
                stmt = select(PomodoroUser).where(PomodoroUser.user_id == user_id)
                user = await session.execute(statement=stmt)
                user = user.scalar()
            if user is None:
                return
            
            await message.answer("üöÄ –ù–æ–≤—ã–π Pomodoro-—Ü–∏–∫–ª! –†–∞–±–æ—Ç–∞–π –µ—â–µ 25 –º–∏–Ω—É—Ç.")
            await sleep(25 * 60)

            async with session_factory() as session:
                stmt = select(PomodoroUser).where(PomodoroUser.user_id == user_id)
                user = await session.execute(statement=stmt)
                user = user.scalar()
            if user is None:
                return
            
            await message.answer("‚è≥ –ü–µ—Ä–µ—Ä—ã–≤ 5 –º–∏–Ω—É—Ç! –û—Ç–¥–æ—Ö–Ω–∏ –∏ —Ä–∞—Å—Å–ª–∞–±—å—Å—è. ‚òï")
            await sleep(5 * 60)



            async with session_factory() as session:
                stmt = select(PomodoroUser).where(PomodoroUser.user_id == user_id)
                user = await session.execute(statement=stmt)
                user = user.scalar()
            if user is None:
                return
            
            await message.answer("üöÄ –ù–æ–≤—ã–π Pomodoro-—Ü–∏–∫–ª! –†–∞–±–æ—Ç–∞–π –µ—â–µ 25 –º–∏–Ω—É—Ç.")
            await sleep(25 * 60)

            async with session_factory() as session:
                stmt = select(PomodoroUser).where(PomodoroUser.user_id == user_id)
                user = await session.execute(statement=stmt)
                user = user.scalar()
            if user is None:
                return
            
            await message.answer("üéâ –¢—ã –∑–∞–≤–µ—Ä—à–∏–ª 4 Pomodoro-—Ü–∏–∫–ª–∞! –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!", reply_markup=main_menu_keyboard())

            





train_dict = {
    "–ó–∞–¥–∞–Ω–∏–µ 1. ¬´–≠–∫–∑–∞–º–µ–Ω —á–µ—Ä–µ–∑ 3 –¥–Ω—è¬ª": {"""–ü—Ä–µ–¥—Å—Ç–∞–≤—å —Å–∏—Ç—É–∞—Ü–∏—é, —á—Ç–æ —Ç—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª(–∞), —á—Ç–æ —á–µ—Ä–µ–∑ 3 –¥–Ω—è —É —Ç–µ–±—è –≤–∞–∂–Ω—ã–π —ç–∫–∑–∞–º–µ–Ω, –Ω–æ —Ç—ã –∑–Ω–∞–µ—à—å —Ç–µ–º—É –ª–∏—à—å –Ω–∞–ø–æ–ª–æ–≤–∏–Ω—É, –ª–∏–±–æ –≤–æ–æ–±—â–µ –µ—ë –Ω–µ –∑–Ω–∞–µ—à—å, —á—Ç–æ –±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ. –í—Ä–µ–º–µ–Ω–∏ —Å–æ–≤—Å–µ–º –º–∞–ª–æ, –∞ –µ—â—ë –Ω—É–∂–Ω–æ —É—Å–ø–µ—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –ø–æ –¥—Ä—É–≥–∏–º –ø—Ä–µ–¥–º–µ—Ç–∞–º.  3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é –∏—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –º–µ–Ω—è–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ –ø–æ–∏—Å–∫–∞—Ö —Å–∞–º–æ–π –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –¥–ª—è —Å–µ–±—è.
–û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ –∑–∞–ø–∏—à–∏ –∏—Ö –≤ –±–æ—Ç–µ""" : ["1Ô∏è. –ß—Ç–æ —Ç—ã –∑–Ω–∞–µ—à—å –ø–æ —ç—Ç–æ–π —Ç–µ–º–µ?", "2Ô∏è. –ö–∞–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã –µ—Å—Ç—å? –ö–∞–∫ —Ç—ã —ç—Ç–æ –ø–æ–Ω—è–ª?", "3. –ö–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å? –ö–∞–∫–∏–µ –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞—é—Ç?", "4. –ö–∞–∫ —Ç—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—à—å –≤—Ä–µ–º—è –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É?", "5Ô∏è. –û—Ü–µ–Ω–∏ —Å–≤–æ—é —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø–æ —à–∫–∞–ª–µ –æ—Ç 1 –¥–æ 4. –ö–∞–∫ –º–æ–∂–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å –µ—ë?"]},
    "–ó–∞–¥–∞–Ω–∏–µ 2. ¬´–¢—ã –ø—Ä–µ–ø–æ–¥–∞—ë—à—å!¬ª": {"""–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç–µ–±–µ –Ω—É–∂–Ω–æ –æ–±—ä—è—Å–Ω–∏—Ç—å —Ç–µ–º—É, –Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–≠–Ω–µ—Ä–≥–∏—è –≤ —Ñ–∏–∑–∏–∫–µ¬ª –∏–ª–∏ –ª—é–±—É—é —Ç–µ–º—É –Ω–∞ —Ç–≤–æ—ë —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ,  –¥—Ä—É–≥—É, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–≤—Å–µ–º –µ—ë –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç. –ù–æ –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: —É —Ç–µ–±—è —Ç–æ–ª—å–∫–æ 2 –º–∏–Ω—É—Ç—ã!  3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é –∏—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –º–µ–Ω—è–π –≤—Ä–µ–º—è –∏  —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ –ø–æ–∏—Å–∫–∞—Ö —Å–∞–º–æ–π –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –¥–ª—è —Å–µ–±—è.
–û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ –∑–∞–ø–∏—à–∏ –∏—Ö –≤ –±–æ—Ç–µ""": ["1Ô∏è. –ö–∞–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è –Ω—É–∂–Ω–æ –æ–±—ä—è—Å–Ω–∏—Ç—å?", "2Ô∏è. –ö–∞–∫ –æ–±—ä—è—Å–Ω–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ?", "3Ô∏è. –ö–∞–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –ø–æ–º–æ–≥—É—Ç –ø–æ–Ω—è—Ç—å —Ç–µ–º—É?", "4Ô∏è. –ö–∞–∫ —Ç—ã –ø—Ä–æ–≤–µ—Ä–∏—à—å, —á—Ç–æ –¥—Ä—É–≥ –ø–æ–Ω—è–ª?", ]},
    "–ó–∞–¥–∞–Ω–∏–µ 3. ¬´–ß—Ç–æ –Ω–µ —Ç–∞–∫ —Å —ç—Ç–∏–º —Ç–µ–∫—Å—Ç–æ–º?¬ª": {"""–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã —á–∏—Ç–∞–µ—à—å —Å—Ç–∞—Ç—å—é –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ: ¬´–ß–µ–º –±–æ–ª—å—à–µ –∫–æ—Ñ–µ —Ç—ã –ø—å—ë—à—å, —Ç–µ–º –≤—ã—à–µ IQ¬ª (–ª–∏–±–æ –≤—ã–±–µ—Ä–∏ –ª—é–±—É—é –¥—Ä—É–≥—É—é —Å—Ç–∞—Ç—å—é –Ω–∞ –≤—ã–±–æ—Ä). –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–≤—É—á–∏—Ç —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω–æ.  3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é –∏—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –º–µ–Ω—è–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏  –∏ —Å—Ç–∞—Ç—å–∏ (–ª—é–±—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –∏ –∏–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö) –≤ –ø–æ–∏—Å–∫–∞—Ö —Å–∞–º–æ–π –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –¥–ª—è —Å–µ–±—è.
–û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ –∑–∞–ø–∏—à–∏ –∏—Ö –≤ –±–æ—Ç–µ""": ["1Ô∏è. –ö–∞–∫–∏–µ –¥–æ–≤–æ–¥—ã –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è?", "2Ô∏è. –ï—Å—Ç—å –ª–∏ —É –∞–≤—Ç–æ—Ä–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞? –ì–¥–µ –æ–Ω –≤–∑—è–ª —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ?", "3Ô∏è. –ö–∞–∫ –±—ã —Ç—ã –ø—Ä–æ–≤–µ—Ä–∏–ª, –ø—Ä–∞–≤–¥–∞ –ª–∏ —ç—Ç–æ?", "4Ô∏è. –ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è, –µ—Å–ª–∏ –º—ã –¥–æ–±–∞–≤–∏–º —Ñ—Ä–∞–∑—É: ¬´–ü–æ –¥–∞–Ω–Ω—ã–º –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ì–∞—Ä–≤–∞—Ä–¥–∞ –∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞¬ª?"]},
    "–ó–∞–¥–∞–Ω–∏–µ 4. ¬´–†–∞–∑–≤–∏—Ç–∏–µ –Ω–∞–≤—ã–∫–æ–≤ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è¬ª": {"""–°–∏—Ç—É–∞—Ü–∏—è: –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –≤—ã–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç (–≤–æ–∑—å–º–∏ –ª—é–±—É—é —Å—Ç–∞—Ç—å—é –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ, –ª–∏–±–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ –≤ —É—á–µ–±–Ω–∏–∫–µ) –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è, –Ω–æ –ø–µ—Ä–µ–¥ —á—Ç–µ–Ω–∏–µ–º —Ç—ã –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ. 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é –∏—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –º–µ–Ω—è–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ –ø–æ–∏—Å–∫–∞—Ö —Å–∞–º–æ–π –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –¥–ª—è —Å–µ–±—è.
–û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ –∑–∞–ø–∏—à–∏ –∏—Ö –≤ –±–æ—Ç–µ""": ["1. –ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ —Ç–µ–∫—Å—Ç–∞.", "2. –°–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–π, –æ —á–µ–º –≤ –Ω–µ–º –ø–æ–π–¥–µ—Ç —Ä–µ—á—å.", "3. –ü–æ—Å–ª–µ —á—Ç–µ–Ω–∏—è —Å—Ä–∞–≤–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º, –Ω–∞–ø–∏—à–∏ —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –∞ —á—Ç–æ –Ω–µ—Ç."]},
    "–ó–∞–¥–∞–Ω–∏–µ 5. ¬´–õ–æ–≥–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ –Ω–∞ –≤—Ä–µ–º—è¬ª": {
        """–°–∏—Ç—É–∞—Ü–∏—è: –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç–µ–±–µ –≤—ã–¥–∞—é—Ç –∫–æ—Ä–æ—Ç–∫—É—é, –Ω–æ –Ω–µ–ø—Ä–æ—Å—Ç—É—é –ª–æ–≥–∏—á–µ—Å–∫—É—é –∑–∞–¥–∞—á—É –∏–ª–∏ –∫—Ä–æ—Å—Å–≤–æ—Ä–¥. –£ —Ç–µ–±—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –≤—Ä–µ–º—è –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 15‚Äì20 –º–∏–Ω—É—Ç). –¢–≤–æ—è —Ü–µ–ª—å ‚Äì –≤—ã–±—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏ —É—Å–ø–µ—Ç—å –¥–∞—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª–µ–µ –ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç. –í—ã–ø–æ–ª–Ω—è–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2‚Äì3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, –ø–æ–¥–±–∏—Ä–∞—è –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –∏ –æ—Ü–µ–Ω–∏–≤–∞—è, –∫–∞–∫ –º–µ–Ω—è–µ—Ç—Å—è —Ç–≤–æ–π –ø–æ–¥—Ö–æ–¥ —Å –æ–ø—ã—Ç–æ–º.""": [
            "1Ô∏è. –ö–∞–∫ —Ç—ã –æ—Ü–µ–Ω–∏–≤–∞–µ—à—å —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á–∏ –∏ –ø–æ—á–µ–º—É? (–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)",
            "2Ô∏è. –ö–∞–∫—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ä–µ—à–µ–Ω–∏—è —Ç—ã –≤—ã–±–µ—Ä–µ—à—å: –±—É–¥–µ—à—å –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ—à–∞–≥–æ–≤–æ, ¬´—Å –∫—Ä–∞—ë–≤¬ª –∏–ª–∏ –º–µ—Ç–æ–¥–æ–º –¥–æ–≥–∞–¥–æ–∫? (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—ã–±–æ—Ä –ø–æ–¥—Ö–æ–¥–∞)",
            "3Ô∏è. –ö–∞–∫ —Ç—ã –±—É–¥–µ—à—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è –∏ –≤–Ω–æ—Å–∏—Ç—å –ø—Ä–∞–≤–∫–∏ –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é, –µ—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–Ω–µ—à—å? (—Å–∞–º–æ—Ä–µ–≥—É–ª—è—Ü–∏—è –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—è)",
            "4Ô∏è. –ö–∞–∫–∏–µ –≤—ã–≤–æ–¥—ã –æ —Å–≤–æ–∏—Ö —Å–∏–ª—å–Ω—ã—Ö –∏ —Å–ª–∞–±—ã—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö —Ç—ã —Å–¥–µ–ª–∞–µ—à—å –ø–æ—Å–ª–µ —Ä–µ—à–µ–Ω–∏—è, –∏ –∫–∞–∫ —ç—Ç–æ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ –±—É–¥—É—â–∏–µ –ø–æ–ø—ã—Ç–∫–∏? (—Ä–µ—Ñ–ª–µ–∫—Å–∏—è)"
        ]
    },
    
    "–ó–∞–¥–∞–Ω–∏–µ 6. ¬´–†–µ—à–µ–Ω–∏–µ –∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã¬ª": {
        """–°–∏—Ç—É–∞—Ü–∏—è: –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É —Ç–µ–±—è –Ω–∞ —Ä—É–∫–∞—Ö –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —Å–¥–∞—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è. –¢–µ–±–µ –≤–∞–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫ —Ç—ã –±—É–¥–µ—à—å –µ—ë –≤—ã–ø–æ–ª–Ω—è—Ç—å: –∫–∞–∫–∏–µ —á–∞—Å—Ç–∏ –ø—Ä–æ—â–µ, –∫–∞–∫–∏–µ —Å–ª–æ–∂–Ω–µ–µ, –∫–∞–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è. –í—ã–ø–æ–ª–Ω—è–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1‚Äì2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö –∏ –∏—Ö —Å–ª–æ–∂–Ω–æ—Å—Ç–∏.""": [
            "1Ô∏è. –í —á—ë–º —Å—É—Ç—å –∑–∞–¥–∞–Ω–∏—è –∏ –∫–∞–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∂–¥—ë—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å? (–ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π)",
            "2Ô∏è. –ö–∞–∫–∏–µ —ç—Ç–∞–ø—ã –∏–ª–∏ —á–∞—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Ç—ã –≤–∏–¥–∏—à—å –∏ –∫–∞–∫ –æ—Ü–µ–Ω–∏–≤–∞–µ—à—å –∏—Ö —Å–ª–æ–∂–Ω–æ—Å—Ç—å? (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏)",
            "3Ô∏è. –ö–∞–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –∏ –∑–Ω–∞–Ω–∏—è —Ç–µ–±–µ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è, –∞ —á—Ç–æ –ø—Ä–∏–¥—ë—Ç—Å—è ¬´–ø–æ–¥—Ç—è–Ω—É—Ç—å¬ª? (—Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞ –∏ –≤–æ—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–µ–ª–æ–≤)",
            "4Ô∏è. –ö–∞–∫ —Ç—ã –±—É–¥–µ—à—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫? (—Å–∞–º–æ—Ä–µ–≥—É–ª—è—Ü–∏—è)"
        ]
    },
    
    "–ó–∞–¥–∞–Ω–∏–µ 7. ¬´–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ –∫—É—Ä—Å–æ–≤–æ–π –∏–ª–∏ –¥–∏–ø–ª–æ–º–Ω–æ–π —Ä–∞–±–æ—Ç—ã¬ª": {
        """–°–∏—Ç—É–∞—Ü–∏—è: –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –ø—Ä–∏—Å—Ç—É–ø–∞–µ—à—å –∫ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –∫—É—Ä—Å–æ–≤–æ–π –∏–ª–∏ –¥–∏–ø–ª–æ–º–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –û—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –ø–ª–∞–Ω–∞ –∑–∞–≤–∏—Å–∏—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ —á—ë—Ç–∫–æ –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Ç—ã –±—É–¥–µ—à—å –¥–≤–∏–≥–∞—Ç—å—Å—è. –í—ã–ø–æ–ª–Ω—è–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2‚Äì3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—è –ø–ª–∞–Ω –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—è —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å.""": [
            "1Ô∏è. –ö–∞–∫–æ–≤–∞ —Ç–≤–æ—è —Ä–∞–±–æ—á–∞—è —Ç–µ–º–∞ –∏ —Ü–µ–ª—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è? (—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏)",
            "2Ô∏è. –ù–∞ –∫–∞–∫–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –∏ –ø–æ–¥–∑–∞–¥–∞—á–∏ —Ç—ã —Ä–∞–∑–¥–µ–ª–∏—à—å —Å–≤–æ—é —Ä–∞–±–æ—Ç—É? (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–∞)",
            "3Ô∏è. –ö–∞–∫ —Ç—ã –æ—Ü–µ–Ω–∏—à—å —Å—Ä–æ–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –∏ –ø–æ—á–µ–º—É? (—Ç–∞–π–º-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ–∑–∞—Ü–∏—è)",
            "4Ô∏è. –ö–∞–∫–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –º–µ—Ç–æ–¥—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Ç—ã –ø–ª–∞–Ω–∏—Ä—É–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å? (–∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∞—è –±–∞–∑–∞)",
            "5Ô∏è. –ß—Ç–æ –º–æ–∂–µ—Ç –ø–æ–º–µ—à–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–≤–æ–µ–≥–æ –ø–ª–∞–Ω–∞ –∏ –∫–∞–∫ —Ç—ã —ç—Ç–æ –ø—Ä–µ–æ–¥–æ–ª–µ–µ—à—å? (–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π)"
        ]
    },
    
    "–ó–∞–¥–∞–Ω–∏–µ 8. ¬´–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –Ω–∞—É—á–Ω–æ–π –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏¬ª": {
        """–°–∏—Ç—É–∞—Ü–∏—è: –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –¥–æ–ª–∂–µ–Ω(–Ω–∞) –≤—ã—Å—Ç—É–ø–∏—Ç—å –Ω–∞ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–π –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –∏–ª–∏ –∑–∞—â–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç–∞. –¢–µ–±–µ –Ω—É–∂–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –æ—Ç—Ä–µ–ø–µ—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–æ–∫–ª–∞–¥–∞. –í—ã–ø–æ–ª–Ω—è–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2‚Äì3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞—è —Ä–∞–∑–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏: —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ, –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç—å, –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã.""": [
            "1Ô∏è. –ö–∞–∫—É—é –∫–ª—é—á–µ–≤—É—é –∏–¥–µ—é —Ç—ã —Ö–æ—á–µ—à—å –¥–æ–Ω–µ—Å—Ç–∏ —Å–ª—É—à–∞—Ç–µ–ª—è–º? (—è—Å–Ω–æ—Å—Ç—å —Ü–µ–ª–∏)",
            "2Ô∏è. –ö–∞–∫ —Ç—ã —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ—à—å —Å–≤–æ—é –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é (–≤–≤–µ–¥–µ–Ω–∏–µ, –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—É–Ω–∫—Ç—ã, –≤—ã–≤–æ–¥—ã)? (–ª–æ–≥–∏–∫–∞ –∏–∑–ª–æ–∂–µ–Ω–∏—è)",
            "3Ô∏è. –ö–∞–∫–∏–µ –Ω–∞–≥–ª—è–¥–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (—Å–ª–∞–π–¥—ã, —Å—Ö–µ–º—ã, –ø—Ä–∏–º–µ—Ä—ã) —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å? (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)",
            "4Ô∏è. –ö–∞–∫ —Ç—ã –ø–ª–∞–Ω–∏—Ä—É–µ—à—å –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è? (—Å–∞–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—å –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ü–∏—è)"
        ]
    },
    
    "–ó–∞–¥–∞–Ω–∏–µ 9. ¬´–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —ç–∫–∑–∞–º–µ–Ω—É: —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è¬ª": {
        """–°–∏—Ç—É–∞—Ü–∏—è: –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é —É —Ç–µ–±—è —ç–∫–∑–∞–º–µ–Ω, –∏ –Ω—É–∂–Ω–æ –æ—Ö–≤–∞—Ç–∏—Ç—å –≤—Å–µ —Ç–µ–º—ã. –¢–≤–æ—è —Ü–µ–ª—å ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ä–µ–º—è. –í—ã–ø–æ–ª–Ω—è–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1‚Äì2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, –∞–¥–∞–ø—Ç–∏—Ä—É—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∫ —Ä–∞–∑–Ω—ã–º –ø—Ä–µ–¥–º–µ—Ç–∞–º.""": [
            "1Ô∏è. –ö–∞–∫–∏–µ —Ç–µ–º—ã –∫–∞–∂—É—Ç—Å—è —Ç–µ–±–µ —Å–∞–º—ã–º–∏ —Å–ª–æ–∂–Ω—ã–º–∏/–≤–∞–∂–Ω—ã–º–∏ –∏ –ø–æ—á–µ–º—É? (–æ—Ü–µ–Ω–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤)",
            "2Ô∏è. –ö–∞–∫ —Ç—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—à—å –≤—Ä–µ–º—è –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ–º —Ç–µ–æ—Ä–∏–∏ –∏ —Ä–µ—à–µ–Ω–∏–µ–º –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞–Ω–∏–π? (–±–∞–ª–∞–Ω—Å –ø–æ–¥—Ö–æ–¥–æ–≤)",
            "3Ô∏è. –ö–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è (–∫–∞—Ä—Ç–æ—á–∫–∏, –∫–æ–Ω—Å–ø–µ–∫—Ç—ã, —Ç–µ—Å—Ç—ã) —Ç—ã –±—É–¥–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –ø–æ—á–µ–º—É? (–≤—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏)",
            "4Ô∏è. –ö–∞–∫ —Ç—ã –ø—Ä–æ–≤–µ—Ä–∏—à—å, —á—Ç–æ –≥–æ—Ç–æ–≤(–∞), –∏ —á—Ç–æ —Å–¥–µ–ª–∞–µ—à—å, –µ—Å–ª–∏ –ø–æ–π–º—ë—à—å, —á—Ç–æ –æ—Ç—Å—Ç–∞—ë—à—å –æ—Ç –≥—Ä–∞—Ñ–∏–∫–∞? (–∞–¥–∞–ø—Ç–∞—Ü–∏—è –∏ —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∞)"
        ]
    },
    
    "–ó–∞–¥–∞–Ω–∏–µ 10. ¬´–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ –∑–∞–¥–∞—á¬ª": {
        """–°–∏—Ç—É–∞—Ü–∏—è: –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É —Ç–µ–±—è –Ω–∞–∫–æ–ø–∏–ª–æ—Å—å –º–Ω–æ–≥–æ –∑–∞–¥–∞—á: —É—á—ë–±–∞, –ø—Ä–æ–µ–∫—Ç—ã, –ª–∏—á–Ω—ã–µ –¥–µ–ª–∞. –¢–µ–±–µ –Ω—É–∂–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –≤—Ä–µ–º—è —Ç–∞–∫, —á—Ç–æ–±—ã –≤—Å—ë —É—Å–ø–µ—Ç—å –±–µ–∑ –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫. –í—ã–ø–æ–ª–Ω—è–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ, –∞–Ω–∞–ª–∏–∑–∏—Ä—É—è —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å.""": [
            "1Ô∏è. –ö–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ —Å–∞–º—ã–µ —Å—Ä–æ—á–Ω—ã–µ/–≤–∞–∂–Ω—ã–µ –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ? –û–±—ä—è—Å–Ω–∏ —Å–≤–æ–π –≤—ã–±–æ—Ä. (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤)",
            "2Ô∏è. –ö–∞–∫ —Ç—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—à—å –∑–∞–¥–∞—á–∏ –ø–æ –¥–Ω—è–º, —É—á–∏—Ç—ã–≤–∞—è —Å–≤–æ–∏ –ø–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏? (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Ä–∏—Ç–º)",
            "3Ô∏è. –ß—Ç–æ –±—É–¥–µ—à—å –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –Ω–æ–≤–∞—è —Å—Ä–æ—á–Ω–∞—è –∑–∞–¥–∞—á–∞ –∏–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ –ø–æ –ø–ª–∞–Ω—É? (–≥–∏–±–∫–æ—Å—Ç—å –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—è)",
            "4Ô∏è. –ö–∞–∫ –æ—Ü–µ–Ω–∏—à—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–≤–æ–µ–≥–æ –ø–ª–∞–Ω–∞ –≤ –∫–æ–Ω—Ü–µ –Ω–µ–¥–µ–ª–∏? (—Ä–µ—Ñ–ª–µ–∫—Å–∏—è –∏ –∫–æ—Ä—Ä–µ–∫—Ü–∏—è)"
        ]
    }
}



@dp.message_handler(commands='s', state=ExerciseStates)
async def s(message: types.Message, state: FSMContext):
    await state.finish()

@dp.message_handler(commands='s', state=Exercise)
async def ss(message: types.Message, state: FSMContext):
    await state.finish()

@dp.message_handler(commands='s', state=ExerciseInfoTraining)
async def ss(message: types.Message, state: FSMContext):
    await state.finish()

@dp.message_handler(text="üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", state=Reflect)
async def back_to_main_menu_reflect(message: types.Message, state: FSMContext):
    await state.finish()
    await message.answer("""–ü—Ä–∏–≤–µ—Ç! –Ø, MetacogniMind_bot –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è  —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Å —Ü–µ–ª—å—é —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑–≤–∏—Ç–∏—è –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤, –≤–∫–ª—é—á–∞—è –æ—Å–æ–∑–Ω–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º—ã—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —Ä–µ—Ñ–ª–µ–∫—Å–∏—é, —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—É—á–µ–Ω–∏—è (—Ä–∞–∑–≤–∏—Ç–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –æ–±—É—á–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π. –Ø ‚Äî —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤. ü§ñ\n\n
üîπ –ú–µ–Ω—è —Å–æ–∑–¥–∞–ª–∞ –ï–ª–µ–Ω–∞ –ó–∞–ø–æ–¥–æ–π–Ω–∏–∫–æ–≤–∞, –ø—Å–∏—Ö–æ–ª–æ–≥, –Ω–µ–π—Ä–æ–ø—Å–∏—Ö–æ–ª–æ–≥, —Å–≤–æ–±–æ–¥–Ω—ã–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å, –∞—Å–ø–∏—Ä–∞–Ω—Ç-—ç–∫—Å—Ç–µ—Ä–Ω, –∞–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ ¬´–ö—É–ª—å—Ç—É—Ä–∞ –ò–ò: —É–º–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ¬ª –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å —Ç–µ–±–µ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ —É—á–∏—Ç—å—Å—è, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –ª—É—á—à–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è.  –ü–æ–¥–ø–∏—Å—ã–≤–∞–πc—è –Ω–∞ –µ—ë —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª: @eduneuro2025\n
üìå –í–∞–∂–Ω–æ: –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞. –ú–µ—Ç–æ–¥–∏–∫–∞ —è–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π, –∞–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã. 
üîπ –°–æ –º–Ω–æ–π —Ç—ã –Ω–∞—É—á–∏—à—å—Å—è:\n
üîπ ‚Äî –†–µ—Ñ–ª–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –¥–µ–Ω—å\n
üîπ ‚Äî –£–ª—É—á—à–∞—Ç—å —É—á–µ–±–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏\n
üîπ ‚Äî –†–∞–∑–≤–∏–≤–∞—Ç—å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å\n
üîπ ‚Äî –†–∞–±–æ—Ç–∞—Ç—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ\n
üîπ ‚Äî –ì–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º –±–µ–∑ —Å—Ç—Ä–µ—Å—Å–∞\n
üîπ ‚Äî –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è\n
üîπ ‚Äî –ü—Ä–∏–º–µ–Ω—è—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ç–∞–π–º-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞\n
üî• –î–∞–≤–∞–π –Ω–∞—á–Ω–µ–º! –ü—Ä–æ–π–¥–∏ 6 —Ç–µ—Å—Ç–æ–≤ –Ω–∏–∂–µ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏, —á—Ç–æ–±—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è! üî•
–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç?
1.	–ü—Ä–æ–π–¥–∏ –≤—Ö–æ–¥–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äì —ç—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —à–∞–≥ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã.
2.	–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ –ø–æ–ª—É—á–∏—à—å –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –±–æ—Ç–∞.
3.	–°–ª–µ–¥—É–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–º—É –≥—Ä–∞—Ñ–∏–∫—É (3 –∑–∞–Ω—è—Ç–∏—è –≤ –Ω–µ–¥–µ–ª—é): 
1. –ú–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
2. –¢—Ä–µ–Ω–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
3. –†–µ—Ñ–ª–µ–∫—Å–∏—è
4. Pomodoro-—Ç–∞–π–º–µ—Ä –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è 
–ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞ –±–æ—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ).
–ò—Å–ø–æ–ª—å–∑—É–π –ø–æ–¥–¥–µ—Ä–∂–∫—É: 
–ï—Å–ª–∏ —É —Ç–µ–±—è –ø—Ä–æ–±–ª–µ–º—ã —Å –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π ‚Äî –Ω–∞–ø–∏—à–∏ –≤ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —á–∞—Ç: –æ–ø–∏—à–∏ —á—Ç–æ —Ç–µ–±—è –±–µ—Å–ø–æ–∫–æ–∏—Ç –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ (/psych_chat).
üöÄ –î–∞–≤–∞–π –Ω–∞—á–Ω–µ–º! –î–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–π–¥–∏ –≤—Ö–æ–¥–Ω—ã–µ —Ç–µ—Å—Ç—ã:
    <a href="https://onlinetestpad.com/s/academic-text-skills">–¢–µ—Å—Ç 1</a>
    <a href="https://onlinetestpad.com/t/borzova-text-test">–¢–µ—Å—Ç 2</a>
    <a href="https://onlinetestpad.com/t/starkey2004-lutsenko2014">–¢–µ—Å—Ç 3</a>
    <a href="https://onlinetestpad.com/t/arpov-reflection-test">–¢–µ—Å—Ç 4</a>
    <a href="https://onlinetestpad.com/t/Metacognition-activity">–¢–µ—Å—Ç 5</a>
    <a href="https://onlinetestpad.com/t/merkulova-ak-test">–¢–µ—Å—Ç 6</a>
    """, parse_mode="html", reply_markup=start_keyboard())


@dp.message_handler(commands=['train'])
async def train_start_cmd(message: types.Message, state: FSMContext):

    kb = types.ReplyKeyboardMarkup()
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 1. ¬´–≠–∫–∑–∞–º–µ–Ω —á–µ—Ä–µ–∑ 3 –¥–Ω—è¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 2. ¬´–¢—ã –ø—Ä–µ–ø–æ–¥–∞—ë—à—å!¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 3. ¬´–ß—Ç–æ –Ω–µ —Ç–∞–∫ —Å —ç—Ç–∏–º —Ç–µ–∫—Å—Ç–æ–º?¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 4. ¬´–†–∞–∑–≤–∏—Ç–∏–µ –Ω–∞–≤—ã–∫–æ–≤ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 5. ¬´–õ–æ–≥–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ –Ω–∞ –≤—Ä–µ–º—è¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 6. ¬´–†–µ—à–µ–Ω–∏–µ –∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 7. ¬´–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ –∫—É—Ä—Å–æ–≤–æ–π –∏–ª–∏ –¥–∏–ø–ª–æ–º–Ω–æ–π —Ä–∞–±–æ—Ç—ã¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 8. ¬´–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –Ω–∞—É—á–Ω–æ–π –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 9. ¬´–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —ç–∫–∑–∞–º–µ–Ω—É: —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 10. ¬´–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ –∑–∞–¥–∞—á¬ª"))
    kb.add(types.KeyboardButton("üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"))


    await message.answer("""–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é —Ç–µ–±—è! –¢—ã –Ω–∞ –≤–µ—Ä–Ω–æ–º –ø—É—Ç–∏! –ó–∞–ø–æ–º–Ω–∏, —á—Ç–æ  —ç—Ç–∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è  —Ä–∞–∑–≤–∏–≤–∞—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤: –æ—Å–æ–∑–Ω–∞–Ω–∏–µ –º—ã—à–ª–µ–Ω–∏—è, —Å–∞–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—å, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–∞–º–æ—Ä–µ–≥—É–ª—è—Ü–∏—è, —Ä–∞–∑–≤–∏—Ç–∏–µ –ø–∞–º—è—Ç–∏ –∏ –æ–±—É—á–µ–Ω–∏–µ. –í—ã–ø–æ–ª–Ω—è–π –∏—Ö 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ 3 –º–µ—Å—è—Ü–µ–≤ –∏ —Ç—ã –ø–æ—á—É–≤—Å—Ç–≤—É–µ—à—å, –∫–∞–∫ –ø—Ä–æ–∫–∞—á–∏–≤–∞—é—Ç—Å—è —Ç–≤–æ–∏ –Ω–∞–≤—ã–∫–∏ —Ä–∞–∑ –∑–∞ —Ä–∞–∑–æ–º. 
–î–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π Pomodoro —Ç–∞–π–º–µ—Ä (–∫–Ω–æ–ø–∫–∞ /pomodoro ‚Äì Pomodoro-—Ç–∞–π–º–µ—Ä). 
–î–∞–º —Ç–µ–±–µ –≤–∞–∂–Ω—ã–π —Å–æ–≤–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å:
–ü–æ–ø—Ä–æ–±—É–π –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä–µ–¥ —á—Ç–µ–Ω–∏–µ–º! 
–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –∏–∑—É—á–∞—Ç—å –Ω–æ–≤—É—é —Ç–µ–º—É, –∑–∞–¥–∞–π —Å–µ–±–µ –≤–æ–ø—Ä–æ—Å—ã: –û —á—ë–º —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å? –ö–∞–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏ –º–æ–≥—É—Ç –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è? –ß—Ç–æ —è —É–∂–µ –∑–Ω–∞—é –ø–æ —ç—Ç–æ–π —Ç–µ–º–µ? –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–∏–µ –∑–Ω–∞–Ω–∏—è –∏ –±—ã—Å—Ç—Ä–µ–µ –ø–æ–Ω—è—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª.  
–¢—Ä–µ–Ω–∏—Ä—É–π—Å—è –Ω–∞—Ö–æ–¥–∏—Ç—å –≤–µ—Ä–æ—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏!  
–ö–æ–≥–¥–∞ —á–∏—Ç–∞–µ—à—å —Å–ª–æ–∂–Ω—É—é —Å—Ç–∞—Ç—å—é –∏–ª–∏ —Ä–µ—à–∞–µ—à—å –∑–∞–¥–∞—á—É, –ø–æ–ø—Ä–æ–±—É–π –∑–∞—Ä–∞–Ω–µ–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, –≥–¥–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏. –≠—Ç–æ —É—Å–∏–ª–∏—Ç —Ç–≤–æ—é –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–º–æ–∂–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫.  
–ò–≥—Ä–∞ ¬´–ß—Ç–æ –±—É–¥–µ—Ç –¥–∞–ª—å—à–µ?¬ª  
–ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ–ø—Ä–æ–±—É–π –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è: –µ—Å–ª–∏ —ç—Ç–æ –ø—Ä–∞–≤–¥–∞, —Ç–æ –∫ —á–µ–º—É —ç—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç? –ö—Ç–æ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω –≤ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–∏ —ç—Ç–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏? –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ –∏ –º—ã—Å–ª–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏.  
–ü–æ–ø—Ä–æ–±—É–π –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å: –ü—Ä–æ—á–∏—Ç–∞–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏–∑ –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏, –æ —á—ë–º –ø–æ–π–¥—ë—Ç —Ä–µ—á—å!
–í–µ–¥–∏ ¬´–î–Ω–µ–≤–Ω–∏–∫ –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ–≥–æ –æ–ø—ã—Ç–∞¬ª
–ö–∞–∫? –í–µ—Å—Ç–∏ –∑–∞–ø–∏—Å–∏ –ø–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ:
‚Ä¢	–¶–µ–ª—å –Ω–∞ —É—Ä–æ–∫/–¥–µ–Ω—å
‚Ä¢	–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –ø–æ–º–æ–≥ –ª—É—á—à–µ –≤—Å–µ–≥–æ?
‚Ä¢	–û—à–∏–±–∫–∏ –∏ –Ω–∞—Ö–æ–¥–∫–∏
‚Ä¢	–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ —Å–ª–µ–¥—É—é—â–µ–º —É—á–µ–±–Ω–æ–º –∑–∞–Ω—è—Ç–∏–∏?
–≠—Ç–æ—Ç –¥–Ω–µ–≤–Ω–∏–∫ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç –Ω–∞–≤—ã–∫ —Å–∞–º–æ—Ä–µ–≥—É–ª—è—Ü–∏–∏. –£–¥–∞—á–∏ —Ç–µ–±–µ –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏ –ø–æ—Ç–æ–º –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —Ç—Ä–µ–Ω–∏–Ω–≥ –ø–æ –∫–Ω–æ–ø–∫–µ –¢—Ä–µ–Ω–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π —Ç–∞–º –∂–¥—É—Ç —Ç–µ–±—è –Ω–µ –º–µ–Ω–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∏ –ø–æ–ª–µ–∑–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è!

""", reply_markup=kb)
    await Exercise.answers.set()

    async with state.proxy() as data:
        data["questions"] = [
            "–ó–∞–¥–∞–Ω–∏–µ 1. ¬´–≠–∫–∑–∞–º–µ–Ω —á–µ—Ä–µ–∑ 3 –¥–Ω—è¬ª", 
            "–ó–∞–¥–∞–Ω–∏–µ 2. ¬´–¢—ã –ø—Ä–µ–ø–æ–¥–∞—ë—à—å!¬ª", 
            "–ó–∞–¥–∞–Ω–∏–µ 3. ¬´–ß—Ç–æ –Ω–µ —Ç–∞–∫ —Å —ç—Ç–∏–º —Ç–µ–∫—Å—Ç–æ–º?¬ª", 
            "–ó–∞–¥–∞–Ω–∏–µ 4. ¬´–†–∞–∑–≤–∏—Ç–∏–µ –Ω–∞–≤—ã–∫–æ–≤ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è¬ª",
            "–ó–∞–¥–∞–Ω–∏–µ 5. ¬´–õ–æ–≥–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ –Ω–∞ –≤—Ä–µ–º—è¬ª",
            "–ó–∞–¥–∞–Ω–∏–µ 6. ¬´–†–µ—à–µ–Ω–∏–µ –∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã¬ª",
            "–ó–∞–¥–∞–Ω–∏–µ 7. ¬´–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ –∫—É—Ä—Å–æ–≤–æ–π –∏–ª–∏ –¥–∏–ø–ª–æ–º–Ω–æ–π —Ä–∞–±–æ—Ç—ã¬ª",
            "–ó–∞–¥–∞–Ω–∏–µ 8. ¬´–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –Ω–∞—É—á–Ω–æ–π –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏¬ª",
            "–ó–∞–¥–∞–Ω–∏–µ 9. ¬´–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —ç–∫–∑–∞–º–µ–Ω—É: —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è¬ª",
            "–ó–∞–¥–∞–Ω–∏–µ 10. ¬´–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ –∑–∞–¥–∞—á¬ª"
        ]
        data["active_question"] = None
        data["all_answers"] = []
        data["only_answers"] = []

@dp.message_handler(content_types="text", state=Exercise.answers)
async def select_task_command(message: types.Message, state: FSMContext):
    kb = types.ReplyKeyboardMarkup()
    async with state.proxy() as data:
        if message.text == "üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é":
            await state.finish()
            await message.answer("""–ü—Ä–∏–≤–µ—Ç! –Ø, MetacogniMind_bot –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è  —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Å —Ü–µ–ª—å—é —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑–≤–∏—Ç–∏—è –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤, –≤–∫–ª—é—á–∞—è –æ—Å–æ–∑–Ω–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º—ã—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —Ä–µ—Ñ–ª–µ–∫—Å–∏—é, —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—É—á–µ–Ω–∏—è (—Ä–∞–∑–≤–∏—Ç–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –æ–±—É—á–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π. –Ø ‚Äî —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤. ü§ñ\n\n
üîπ –ú–µ–Ω—è —Å–æ–∑–¥–∞–ª–∞ –ï–ª–µ–Ω–∞ –ó–∞–ø–æ–¥–æ–π–Ω–∏–∫–æ–≤–∞, –ø—Å–∏—Ö–æ–ª–æ–≥, –Ω–µ–π—Ä–æ–ø—Å–∏—Ö–æ–ª–æ–≥, —Å–≤–æ–±–æ–¥–Ω—ã–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å, –∞—Å–ø–∏—Ä–∞–Ω—Ç-—ç–∫—Å—Ç–µ—Ä–Ω, –∞–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ ¬´–ö—É–ª—å—Ç—É—Ä–∞ –ò–ò: —É–º–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ¬ª –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å —Ç–µ–±–µ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ —É—á–∏—Ç—å—Å—è, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –ª—É—á—à–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è.  –ü–æ–¥–ø–∏—Å—ã–≤–∞–πc—è –Ω–∞ –µ—ë —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª: @eduneuro2025\n
üìå –í–∞–∂–Ω–æ: –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞. –ú–µ—Ç–æ–¥–∏–∫–∞ —è–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π, –∞–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã. 
üîπ –°–æ –º–Ω–æ–π —Ç—ã –Ω–∞—É—á–∏—à—å—Å—è:\n
üîπ ‚Äî –†–µ—Ñ–ª–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –¥–µ–Ω—å\n
üîπ ‚Äî –£–ª—É—á—à–∞—Ç—å —É—á–µ–±–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏\n
üîπ ‚Äî –†–∞–∑–≤–∏–≤–∞—Ç—å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å\n
üîπ ‚Äî –†–∞–±–æ—Ç–∞—Ç—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ\n
üîπ ‚Äî –ì–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º –±–µ–∑ —Å—Ç—Ä–µ—Å—Å–∞\n
üîπ ‚Äî –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è\n
üîπ ‚Äî –ü—Ä–∏–º–µ–Ω—è—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ç–∞–π–º-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞\n
üî• –î–∞–≤–∞–π –Ω–∞—á–Ω–µ–º! –ü—Ä–æ–π–¥–∏ 6 —Ç–µ—Å—Ç–æ–≤ –Ω–∏–∂–µ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏, —á—Ç–æ–±—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è! üî•
–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç?
1.	–ü—Ä–æ–π–¥–∏ –≤—Ö–æ–¥–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äì —ç—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —à–∞–≥ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã.
2.	–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ –ø–æ–ª—É—á–∏—à—å –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –±–æ—Ç–∞.
3.	–°–ª–µ–¥—É–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–º—É –≥—Ä–∞—Ñ–∏–∫—É (3 –∑–∞–Ω—è—Ç–∏—è –≤ –Ω–µ–¥–µ–ª—é): 
1. –ú–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
2. –¢—Ä–µ–Ω–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
3. –†–µ—Ñ–ª–µ–∫—Å–∏—è
4. Pomodoro-—Ç–∞–π–º–µ—Ä –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è 
–ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞ –±–æ—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ).
–ò—Å–ø–æ–ª—å–∑—É–π –ø–æ–¥–¥–µ—Ä–∂–∫—É: 
–ï—Å–ª–∏ —É —Ç–µ–±—è –ø—Ä–æ–±–ª–µ–º—ã —Å –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π ‚Äî –Ω–∞–ø–∏—à–∏ –≤ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —á–∞—Ç: –æ–ø–∏—à–∏ —á—Ç–æ —Ç–µ–±—è –±–µ—Å–ø–æ–∫–æ–∏—Ç –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ (/psych_chat).
üöÄ –î–∞–≤–∞–π –Ω–∞—á–Ω–µ–º! –î–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–π–¥–∏ –≤—Ö–æ–¥–Ω—ã–µ —Ç–µ—Å—Ç—ã:
    <a href="https://onlinetestpad.com/s/academic-text-skills">–¢–µ—Å—Ç 1</a>
    <a href="https://onlinetestpad.com/t/borzova-text-test">–¢–µ—Å—Ç 2</a>
    <a href="https://onlinetestpad.com/t/starkey2004-lutsenko2014">–¢–µ—Å—Ç 3</a>
    <a href="https://onlinetestpad.com/t/arpov-reflection-test">–¢–µ—Å—Ç 4</a>
    <a href="https://onlinetestpad.com/t/Metacognition-activity">–¢–µ—Å—Ç 5</a>
    <a href="https://onlinetestpad.com/t/merkulova-ak-test">–¢–µ—Å—Ç 6</a>
            """, 
            parse_mode="html", reply_markup=start_keyboard())
            return
        for i in data["questions"]:
            kb.add(i)
            kb.add(types.KeyboardButton("üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é")) 
        if not message.text in data["questions"] and data["active_question"] is None:
            await message.answer("–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω–æ –∏–∑ –∑–∞–¥–∞–Ω–∏–π –ø–æ –∫–Ω–æ–ø–∫–∞–º –Ω–∏–∂–µ", reply_markup=kb)
            return
        
        if message.text in data["questions"] and data["active_question"] is None:
            # –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π
            if message.text == "–ó–∞–¥–∞–Ω–∏–µ 1. ¬´–≠–∫–∑–∞–º–µ–Ω —á–µ—Ä–µ–∑ 3 –¥–Ω—è¬ª":
                data["amount_of_questions"] = 5
                data["n"] = 1
            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 2. ¬´–¢—ã –ø—Ä–µ–ø–æ–¥–∞—ë—à—å!¬ª":
                data["amount_of_questions"] = 4
                data["n"] = 2
            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 3. ¬´–ß—Ç–æ –Ω–µ —Ç–∞–∫ —Å —ç—Ç–∏–º —Ç–µ–∫—Å—Ç–æ–º?¬ª":
                data["amount_of_questions"] = 4
                data["n"] = 3
            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 4. ¬´–†–∞–∑–≤–∏—Ç–∏–µ –Ω–∞–≤—ã–∫–æ–≤ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è¬ª":
                data["amount_of_questions"] = 3
                data["n"] = 4
            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 5. ¬´–õ–æ–≥–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ –Ω–∞ –≤—Ä–µ–º—è¬ª":
                data["amount_of_questions"] = 4
                data["n"] = 5
            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 6. ¬´–†–µ—à–µ–Ω–∏–µ –∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã¬ª":
                data["amount_of_questions"] = 4
                data["n"] = 6
            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 7. ¬´–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ –∫—É—Ä—Å–æ–≤–æ–π –∏–ª–∏ –¥–∏–ø–ª–æ–º–Ω–æ–π —Ä–∞–±–æ—Ç—ã¬ª":
                data["amount_of_questions"] = 5
                data["n"] = 7
            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 8. ¬´–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –Ω–∞—É—á–Ω–æ–π –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏¬ª":
                data["amount_of_questions"] = 4
                data["n"] = 8
            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 9. ¬´–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —ç–∫–∑–∞–º–µ–Ω—É: —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è¬ª":
                data["amount_of_questions"] = 4
                data["n"] = 9
            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 10. ¬´–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ –∑–∞–¥–∞—á¬ª":
                data["amount_of_questions"] = 4
                data["n"] = 10

            data["all_answers"].append(message.text)
            data["count"] = 1
            data["questions"].remove(message.text)
            data["active_question"] = message.text
            data["dct"] = train_dict[message.text]
            
            for i in data["dct"]:
                await message.answer(i)
                data["all_answers"].append(i)
                data["all_answers"].append(data["dct"][i][0])
                await message.answer(data["dct"][i][0])
            
            return
        
        if not message.text in data["questions"] and data["active_question"] is not None:
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É –æ—Ç–≤–µ—Ç–∞
            if len(message.text.split()) < 6:
                await message.answer("–ù–∞–ø–∏—à–∏ –±–æ–ª–µ–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –Ω–µ –º–µ–Ω–µ–µ 6 —Å–ª–æ–≤")
                return
            
            # –õ–æ–≥–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
            if data["count"] == data["amount_of_questions"]:
                await message.answer("–¢—ã –º–æ–ª–æ–¥–µ—Ü, –æ—Ç–ª–∏—á–Ω–æ –æ—Ç–≤–µ—á–∞–µ—à—å –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã. –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!", reply_markup=kb)
                data["all_answers"].append(message.text)
                data["active_question"] = None
                data["only_answers"].append(message.text)

                dat = "\n".join(data["all_answers"])

                messages = [
                    {"role": "user", "content": "–ü—Ä–∏–≤–µ—Ç. –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –ø—Å–∏—Ö–æ–ª–æ–≥ –∏ –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è —ç—Ç–∏–º —É–∂–µ 40 –ª–µ—Ç. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–∞–ª —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –°–µ–π—á–∞—Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–π —Ç—Ä–µ–Ω–∏–Ω–≥. –ù–∏–∂–µ –±—É–¥—É—Ç –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –∫ –Ω–µ–º—É"},
                    {"role": "user", "content": dat}
                ]

                if len(data["questions"]) == 0:
                    res = await ask_gpt(messages=messages)
                    await message.answer(res, reply_markup=main_menu_keyboard())
                    async with session_factory() as session:
                        stmt = insert(Train).values(user_id=message.from_user.id, answers="RAZDELITEL".join(data["all_answers"]))
                        await session.execute(statement=stmt)
                        await session.commit()
                    await state.finish()
                return

            # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
            data["all_answers"].append(message.text)
            data["only_answers"].append(message.text)
            for i in data["dct"]:
                await message.answer(data["dct"][i][data["count"]])
                data["all_answers"].append(data["dct"][i][data["count"]])

            data["count"] += 1


info_training_dict = {
    "–ó–∞–¥–∞–Ω–∏–µ 1. ¬´–í—ã–¥–µ–ª–∏ –≥–ª–∞–≤–Ω–æ–µ¬ª": {"–°–∏—Ç—É–∞—Ü–∏—è: –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç–µ–±–µ –Ω—É–∂–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫—Ä–∞—Ç–∫–∏–π –∫–æ–Ω—Å–ø–µ–∫—Ç –ø–æ —Å–ª–æ–∂–Ω–æ–π —Ç–µ–º–µ. –û–¥–Ω–∞–∫–æ —Ç–µ–∫—Å—Ç –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–≥–æ –Ω–µ–Ω—É–∂–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –≤—ã–¥–µ–ª–∏—Ç—å –∏–∑ –Ω–µ–≥–æ —Ç–æ–ª—å–∫–æ —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ, —á—Ç–æ–±—ã –∑–∞–ø–æ–º–Ω–∏—Ç—å –±—ã—Å—Ç—Ä–µ–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ.": ["1. –û —á—ë–º —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç?", "2. –ö–∞–∫–∏–µ 3 –≥–ª–∞–≤–Ω—ã–µ –∏–¥–µ–∏ —Ç—ã –≤—ã–¥–µ–ª–∏–ª(–∞)?", "3. –ö–∞–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏–ª–∏ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–≤—Ç–æ—Ä?", "4. –ï—Å–ª–∏ –±—ã —Ç–µ–±–µ –Ω—É–∂–Ω–æ –±—ã–ª–æ –æ–±—ä—è—Å–Ω–∏—Ç—å —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç –¥—Ä—É–≥—É –≤ 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö, —á—Ç–æ –±—ã —Ç—ã —Å–∫–∞–∑–∞–ª(–∞)?", "5. –ö–∞–∫ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏?", ]},
    "–ó–∞–¥–∞–Ω–∏–µ 2. ¬´–ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—è?¬ª": {"""–°–∏—Ç—É–∞—Ü–∏—è: –í –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–æ–≤–æ—Å—Ç–µ–π. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—Ä–∞–≤–¥–∏–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–µ–π –∏–ª–∏ —Ñ–µ–π–∫–æ–º. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –Ω–∞—É—á–∏—Ç—å—Å—è –æ—Ç–ª–∏—á–∞—Ç—å –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –æ—Ç –ª–æ–∂–Ω—ã—Ö.  
–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, –∞–Ω–∞–ª–∏–∑–∏—Ä—É—è —Ä–∞–∑–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.""": ["1Ô∏è. –ö—Ç–æ –∞–≤—Ç–æ—Ä –Ω–æ–≤–æ—Å—Ç–∏? –ï—Å—Ç—å –ª–∏ —É –Ω–µ–≥–æ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è?", "2Ô∏è. –ï—Å—Ç—å –ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–µ—Ä–≤–æ–∏—Å—Ç–æ—á–Ω–∏–∫–∏? –ì–¥–µ –∏—Ö –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å?", "3Ô∏è. –ï—Å—Ç—å –ª–∏ –≤ —Ç–µ–∫—Å—Ç–µ —ç–º–æ—Ü–∏–∏, –∫–ª–∏–∫–±–µ–π—Ç, –æ–±–æ–±—â–µ–Ω–∏—è?", "4Ô∏è. –û—Ü–µ–Ω–∏—Ç–µ, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –ª–∏ –¥—Ä—É–≥–∏–µ –Ω–∞–¥—ë–∂–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é?", ""]},
    "–ó–∞–¥–∞–Ω–∏–µ 3. ¬´–°–æ—Å—Ç–∞–≤—å –∫–∞—Ä—Ç—É –∑–Ω–∞–Ω–∏–π¬ª": {"""–°–∏—Ç—É–∞—Ü–∏—è: –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç–µ–±–µ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å –¥–ª–∏–Ω–Ω—É—é –Ω–∞—É—á–Ω—É—é —Å—Ç–∞—Ç—å—é/–∫–Ω–∏–≥—É –∏ –≤—ã–¥–µ–ª–∏—Ç—å –≥–ª–∞–≤–Ω–æ–µ, —Ç—ã —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—à—å –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–µ–∫—Ç –∏ —Ö–æ—á–µ—à—å —á–µ—Ç–∫–æ –ø–æ–Ω—è—Ç—å –µ–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–ª–∏ —Ç—ã –≥–æ—Ç–æ–≤–∏—à—å—Å—è –∫ —ç–∫–∑–∞–º–µ–Ω—É –∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —Ç–µ–º–µ ¬´–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Ç–µ–æ—Ä–∏–∏¬ª (–∏–ª–∏ –ª—é–±–∞—è –¥—Ä—É–≥–∞—è —Å–ª–æ–∂–Ω–∞—è —Ç–µ–º–∞).
–ö–æ–≥–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤ –≤–∏–¥–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã, –µ—ë –ª–µ–≥—á–µ –∑–∞–ø–æ–º–Ω–∏—Ç—å. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –∫–∞—Ä—Ç –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø–æ–Ω—è—Ç–∏—è–º–∏ –∏ –≤—ã–¥–µ–ª–∏—Ç—å –≥–ª–∞–≤–Ω–æ–µ.""": ["1Ô∏è. –ö–∞–∫–æ–≤–∞ –≥–ª–∞–≤–Ω–∞—è —Ç–µ–º–∞?", "2Ô∏è. –ö–∞–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ –∞—Å–ø–µ–∫—Ç—ã –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å?", "3Ô∏è. –ö–∞–∫ –º–æ–∂–Ω–æ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–≥—Ä–∞—Ñ–∏–∫–∏, —Å—Ö–µ–º—ã, —Ç–∞–±–ª–∏—Ü—ã)?", ]},
    "–ó–∞–¥–∞–Ω–∏–µ 4. ¬´–ü—Ä–æ–±–ª–µ–º–∞ —Å —Ä–∞–∑–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω¬ª": {"""–°–∏—Ç—É–∞—Ü–∏—è: –í –º–∏—Ä–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–ø–æ—Ä–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∑—ã–≤–∞—é—Ç —Ä–∞–∑–Ω—ã–µ —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è. –†–∞—Å—Å–º–æ—Ç—Ä–∏ –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å –Ω–∞ –≤—ã–±–æ—Ä. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –¥–≤—É—Ö —Å—Ç–æ—Ä–æ–Ω, –ø—Ä–∏–≤–µ—Å—Ç–∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã ¬´–∑–∞¬ª –∏ ¬´–ø—Ä–æ—Ç–∏–≤¬ª, –∞ –∑–∞—Ç–µ–º —Å–¥–µ–ª–∞—Ç—å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥. –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, –∞–Ω–∞–ª–∏–∑–∏—Ä—É—è —Ä–∞–∑–Ω—ã–µ —Ç–µ–º—ã.
–û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ –∑–∞–ø–∏—à–∏ –∏—Ö –≤ –±–æ—Ç–µ:""": ["1Ô∏è. –ö–∞–∫—É—é —Ç–µ–º—É —Ç—ã –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—à—å? –û —á–µ–º –æ–Ω–∞.", "2Ô∏è. –ö–∞–∫–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –º–æ–∂–Ω–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –≤ –ø–æ–ª—å–∑—É —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –≤ –¥–∞–Ω–Ω–æ–π —Ç–µ–º–µ?", "3Ô∏è. –ö–∞–∫–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –º–æ–∂–Ω–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –ø—Ä–æ—Ç–∏–≤ —ç—Ç–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è?", "4Ô∏è. –ö–∞–∫–æ–π —Ç–≤–æ–π –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –ø–æ —ç—Ç–æ–π —Ç–µ–º–µ?"]},
    "–ó–∞–¥–∞–Ω–∏–µ 5. ¬´–í—ã—è–≤–∏ —Å–∫—Ä—ã—Ç—ã–µ —Å–º—ã—Å–ª–æ–≤—ã–µ —Å–≤—è–∑–∏¬ª": {"""–°–∏—Ç—É–∞—Ü–∏—è: –ß–∞—Å—Ç–æ –≤ —Ç–µ–∫—Å—Ç–∞—Ö, –Ω–æ–≤–æ—Å—Ç—è—Ö –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —Å–∫—Ä—ã—Ç—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ñ–∞–∫—Ç–∞–º–∏ –∏ —Å–æ–±—ã—Ç–∏—è–º–∏. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –≤—ã—è–≤–∏—Ç—å —ç—Ç–∏ —Å–≤—è–∑–∏ –∏ –æ–±—ä—è—Å–Ω–∏—Ç—å –∏—Ö –ª–æ–≥–∏—á–µ—Å–∫—É—é –ø—Ä–∏—Ä–æ–¥—É.
–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, –∞–Ω–∞–ª–∏–∑–∏—Ä—É—è —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
–û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ –∑–∞–ø–∏—à–∏ –∏—Ö –≤ –±–æ—Ç–µ:""": ["1Ô∏è. –ö–∞–∫—É—é —Ç–µ–º—É —Ç—ã –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—à—å?", "2Ô∏è. –ö–∞–∫–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–∫—Ç—ã –∏–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã?", "3Ô∏è. –ö–∞–∫–∏–µ —Å–∫—Ä—ã—Ç—ã–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏ –º–æ–∂–Ω–æ –≤—ã—è–≤–∏—Ç—å –º–µ–∂–¥—É —ç—Ç–∏–º–∏ —Ñ–∞–∫—Ç–∞–º–∏?", "4Ô∏è. –ö–∞–∫ —ç—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —Ç–≤–æ–∏ –≤—ã–≤–æ–¥—ã?"]},
    "–ó–∞–¥–∞–Ω–∏–µ 6. ¬´–ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º¬ª": {"""–°–∏—Ç—É–∞—Ü–∏—è: –¢—ã –ø–∏—à–µ—à—å –∫—É—Ä—Å–æ–≤—É—é, –¥–∏–ø–ª–æ–º–Ω—É—é —Ä–∞–±–æ—Ç—É –∏–ª–∏ —à–∫–æ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç, –∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±—ã—Å—Ç—Ä–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ. –í–º–µ—Å—Ç–æ —á—Ç–µ–Ω–∏—è —Å–æ—Ç–µ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü –≤–∞–∂–Ω–æ —É–º–µ—Ç—å –≤—ã–¥–µ–ª—è—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –¥–ª—è –ø–æ–∏—Å–∫–∞.
–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, —á—Ç–æ–±—ã —Ä–∞–∑–≤–∏—Ç—å –Ω–∞–≤—ã–∫ –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
–û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ –∑–∞–ø–∏—à–∏ –∏—Ö –≤ –±–æ—Ç–µ:""": ["1Ô∏è. –ö–∞–∫–∞—è —Ç–µ–º–∞ —Ç–≤–æ–µ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è? (–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –µ—ë –∫—Ä–∞—Ç–∫–æ –∏ —Ç–æ—á–Ω–æ)", "2Ô∏è. –ö–∞–∫–∏–µ 5-7 –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –∏–ª–∏ —Ñ—Ä–∞–∑ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–∏—Å–∫–∞?", "3Ô∏è. –ö–∞–∫–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ (–Ø–Ω–¥–µ–∫—Å, Google Scholar, eLibrary, , –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∞–π—Ç—ã –∏ –¥—Ä.)?", "4Ô∏è. –ö–∞–∫–∏–µ –∏–∑ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∫–∞–∂—É—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã–º–∏ –∏ –ø–æ—á–µ–º—É?"]},
    "–ó–∞–¥–∞–Ω–∏–µ 7. ¬´–ë—ã—Å—Ç—Ä–æ–µ –∏–∑—É—á–µ–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –æ–±—ä—ë–º–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏¬ª": {"""–°–∏—Ç—É–∞—Ü–∏—è: –ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –Ω–∞—É—á–Ω–æ–π –∏–ª–∏ –ø—Ä–æ–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤–∞–∂–Ω–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞–π—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –Ω–æ –∏ –±—ã—Å—Ç—Ä–æ –µ—ë –∏–∑—É—á–∏—Ç—å, –≤—ã–¥–µ–ª–∏–≤ –∫–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –Ω–∞—É—á–∏—Ç—å—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —á—Ç–µ–Ω–∏—é –∏ –∞–Ω–∞–ª–∏–∑—É –¥–∞–Ω–Ω—ã—Ö.
–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, —Ä–∞–±–æ—Ç–∞—è —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ —Ç–µ–∫—Å—Ç–æ–≤.
–û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ –∑–∞–ø–∏—à–∏ –∏—Ö –≤ –±–æ—Ç–µ:""": ["1Ô∏è. –ö–∞–∫–æ–π —Ç–µ–∫—Å—Ç –∏–ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫ —Ç—ã –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—à—å? (–ù–∞–∑–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä, –¥–∞—Ç–∞, —Å—Å—ã–ª–∫–∞)", "2Ô∏è. –ö–∞–∫—É—é –≥–ª–∞–≤–Ω—É—é –º—ã—Å–ª—å –ø–µ—Ä–µ–¥–∞—ë—Ç —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç? (–ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ –≤ 1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö)", "3Ô∏è. –ö–∞–∫–∏–µ 3-5 –∫–ª—é—á–µ–≤—ã—Ö –∏–¥–µ–π –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å?", "4Ô∏è. –ö–∞–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç–µ? (–¶–∏—Ç–∞—Ç—ã, –≤—ã–≤–æ–¥—ã, —Å—Å—ã–ª–∫–∏)"]},
    "–ó–∞–¥–∞–Ω–∏–µ 8. ¬´–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏¬ª": {"""–°–∏—Ç—É–∞—Ü–∏—è:
–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –ø–æ–ª—É—á–∏–ª —Ç–µ–∫—Å—Ç –æ—Ç ChatGPT –∏–ª–∏ –¥—Ä—É–≥–æ–π –Ω–µ–π—Ä–æ—Å–µ—Ç–∏. –ù–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥ –æ–Ω –∫–∞–∂–µ—Ç—Å—è —É–±–µ–¥–∏—Ç–µ–ª—å–Ω—ã–º, –Ω–æ –≤—Å–µ–≥–¥–∞ –≤–∞–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –µ—ë –¥–ª—è —É—á—ë–±—ã –∏–ª–∏ —Ä–∞–±–æ—Ç—ã. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç, –Ω–∞–π—Ç–∏ —Å–ª–∞–±—ã–µ –º–µ—Å—Ç–∞, –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, —Å—Ç–µ—Ä–µ–æ—Ç–∏–ø—ã, –ø—Ä–µ–¥–≤–∑—è—Ç–æ—Å—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ–ø–∏—Ä–∞–µ—Ç—Å—è –ª–∏ —Ç–µ–∫—Å—Ç –Ω–∞ –Ω–∞–¥—ë–∂–Ω—ã–µ –Ω–∞—É—á–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏.""": ["1. –ö–∞–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–∫—Å—Ç? (–ü–µ—Ä–µ—á–∏—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–∑–∏—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–¥–≤–∏–≥–∞–µ—Ç –∞–≤—Ç–æ—Ä)", "2. –ï—Å—Ç—å –ª–∏ –≤ —Ç–µ–∫—Å—Ç–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏–ª–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è? –ö–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ? (–ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥–º–µ–Ω–∞ –ø–æ–Ω—è—Ç–∏–π, –ª–æ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–≤—è–∑—å, –Ω–µ–æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –æ–±–æ–±—â–µ–Ω–∏—è)", "3. –û–±–Ω–∞—Ä—É–∂–∏–ª(–∞) –ª–∏ —Ç—ã –ø—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–µ–¥–≤–∑—è—Ç–æ—Å—Ç–∏ –∏–ª–∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –æ–∫—Ä–∞—Å–∫–∏ —Ç–µ–∫—Å—Ç–∞? –ü—Ä–∏–≤–µ–¥–∏ –ø—Ä–∏–º–µ—Ä—ã.", "4. –ï—Å—Ç—å –ª–∏ –≤ —Ç–µ–∫—Å—Ç–µ —Å—Ç–µ—Ä–µ–æ—Ç–∏–ø–Ω—ã–µ –∏–ª–∏ —à–∞–±–ª–æ–Ω–Ω—ã–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è? –ö–∞–∫–∏–µ –∏–∑ –Ω–∏—Ö —Ç—Ä–µ–±—É—é—Ç –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤?", "5. –£–¥–∞–ª–æ—Å—å –ª–∏ –Ω–∞–π—Ç–∏ –Ω–∞—É—á–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–µ –∏–ª–∏ –æ–ø—Ä–æ–≤–µ—Ä–≥–∞—é—â–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ —Ç–µ–∫—Å—Ç–∞? –ö–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ? (–£–∫–∞–∂–∏ –∞–≤—Ç–æ—Ä–æ–≤, –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–∞—Ç–µ–π –∏–ª–∏ –∫–Ω–∏–≥, —Å–∞–π—Ç—ã –Ω–∞—É—á–Ω—ã—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏–π)"]}
}


@dp.message_handler(text="üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", state=Exercise.answers)
async def back_to_main_menu(message: types.Message, state: FSMContext):
        return start_keyboard()

@dp.message_handler(commands="info_training")
async def info_training_command(message: types.Message, state: FSMContext):
    kb = types.ReplyKeyboardMarkup()
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 1. ¬´–í—ã–¥–µ–ª–∏ –≥–ª–∞–≤–Ω–æ–µ¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 2. ¬´–ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—è?¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 3. ¬´–°–æ—Å—Ç–∞–≤—å –∫–∞—Ä—Ç—É –∑–Ω–∞–Ω–∏–π¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 4. ¬´–ü—Ä–æ–±–ª–µ–º–∞ —Å —Ä–∞–∑–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 5. ¬´–í—ã—è–≤–∏ —Å–∫—Ä—ã—Ç—ã–µ —Å–º—ã—Å–ª–æ–≤—ã–µ —Å–≤—è–∑–∏¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 6. ¬´–ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 7. ¬´–ë—ã—Å—Ç—Ä–æ–µ –∏–∑—É—á–µ–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –æ–±—ä—ë–º–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏¬ª"))
    kb.add(types.KeyboardButton("–ó–∞–¥–∞–Ω–∏–µ 8. ¬´–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏¬ª"))
    kb.add(types.KeyboardButton("üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"))

    await message.answer("""–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é —Ç–µ–±—è! –¢—ã –Ω–∞ –≤–µ—Ä–Ω–æ–º –ø—É—Ç–∏! 
–î–∞–º —Ç–µ–±–µ –Ω–µ–±–æ–ª—å—à–æ–π —Å–æ–≤–µ—Ç:
- –ß–∏—Ç–∞–π –∑–∞–≥–æ–ª–æ–≤–∫–∏, –ø–µ—Ä–≤—ã–µ –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∞–±–∑–∞—Ü–µ–≤  ‚Äì —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –ø–æ–Ω—è—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –∏–¥–µ—é —Ç–µ–∫—Å—Ç–∞.  
- –í—ã–¥–µ–ª—è–π –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏ –∏—â–∏ –∏—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è ‚Äì –æ–Ω–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –≤–∞–∂–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏.  
- –ò—Å–ø–æ–ª—å–∑—É–π –º–µ—Ç–æ–¥ SQ3R (Survey, Question, Read, Recite, Review) –¥–ª—è –≥–ª—É–±–æ–∫–æ–π –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞:
  1. Survey (–û–±–∑–æ—Ä): –ë—ã—Å—Ç—Ä–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π —Ç–µ–∫—Å—Ç, –æ–±—Ä–∞—â–∞—è –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∏, —Å–ø–∏—Å–∫–∏, –≥—Ä–∞—Ñ–∏–∫–∏.
  2. Question (–í–æ–ø—Ä–æ—Å): –°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –≤–æ–ø—Ä–æ—Å—ã –∫ —Ç–µ–∫—Å—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ö–∞–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã –¥–µ–ª–∞–µ—Ç –∞–≤—Ç–æ—Ä?").
  3. Read (–ß—Ç–µ–Ω–∏–µ): –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —á–∏—Ç–∞–π —Ç–µ–∫—Å—Ç, –æ—Ç–º–µ—á–∞—è –≤–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã.
  4. Recite (–ü–µ—Ä–µ—Å–∫–∞–∑): –ü–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä—É–π –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã, —á—Ç–æ–±—ã –ª—É—á—à–µ –∑–∞–ø–æ–º–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.
  5. Review (–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ): –ü—Ä–æ—Å–º–æ—Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–¥–µ–∏ –∏ —É–±–µ–¥–∏—Å—å, —á—Ç–æ –ø–æ–Ω—è–ª –º–∞—Ç–µ—Ä–∏–∞–ª.
–ü—Ä–∏–º–µ–Ω—è–π —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö –∏ –æ—Ü–µ–Ω–∏, –Ω–∞—Å–∫–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä–µ–µ —Ç—ã –º–æ–∂–µ—à—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–∏–µ –º–∞—Å—Å–∏–≤—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏!
–°–æ–≤–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç —Ç–µ–±–µ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º:
üîé –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–π —Å–ø–æ—Ä–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∏—Å–ø–æ–ª—å–∑—É—è, –Ω–∞–ø—Ä–∏–º–µ—Ä: Google Scholar, eLibrary, PubMed –∏ –¥—Ä.
üß† –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–Ω–æ—Å–∏—Å—å –∫ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –≤—ã—Å–∫–∞–∑—ã–≤–∞–Ω–∏—è–º –∏ –≥—Ä–æ–º–∫–∏–º –∑–∞—è–≤–ª–µ–Ω–∏—è–º ‚Äî —ç—Ç–æ —á–∞—Å—Ç–æ –ø—Ä–∏–∑–Ω–∞–∫ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏.
üìä –ü—Ä–æ–≤–µ—Ä—è–π —Ñ–∞–∫—Ç—ã: —á–∏—Å–ª–∞, –¥–∞—Ç—ã, —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è ‚Äî –∏—â–∏ –ø–µ—Ä–≤–æ–∏—Å—Ç–æ—á–Ω–∏–∫.
‚ùì –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –∫–∞–∂–µ—Ç—Å—è –æ—á–µ–≤–∏–¥–Ω—ã–º ‚Äî —Å–ø—Ä–æ—Å–∏ —Å–µ–±—è: ¬´–ê –µ—Å—Ç—å –ª–∏ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞?¬ª
üîÑ –ü–æ–≤—Ç–æ—Ä–∏  —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Å –¥—Ä—É–≥–∏–º —Ç–µ–∫—Å—Ç–æ–º, —á—Ç–æ–±—ã –Ω–∞—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≤—ã–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç–∏.
–ú–æ–∂–µ—à—å  –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞ —Å ChatGPT –∏–ª–∏ –¥—Ä—É–≥–æ–π –Ω–µ–π—Ä–æ—Å–µ—Ç–∏:
‚Ä¢	¬´–†–∞–∑–±–µ—Ä–∏ —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –∫–æ–Ω—Ç—Ä–∞—Ä–≥—É–º–µ–Ω—Ç—ã. –ö–∞–∫–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏–ª–∏ –ø—Ä–æ–±–µ–ª—ã –≤ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è—Ö —Ç—ã –≤–∏–¥–∏—à—å?¬ª
‚Ä¢	¬´–ü—Ä–∏–≤–µ–¥–∏ —Å–ø–∏—Å–æ–∫ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ —ç—Ç–æ–º —Ç–µ–∫—Å—Ç–µ –∏ –æ–±—ä—è—Å–Ω–∏, –ø–æ—á–µ–º—É –æ–Ω–∏ –º–æ–≥—É—Ç –≤–≤–æ–¥–∏—Ç—å –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ¬ª.
‚Ä¢	¬´–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø—Ä–µ–¥–≤–∑—è—Ç–æ—Å—Ç–∏. –ï—Å—Ç—å –ª–∏ –≤ –Ω—ë–º –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, —ç–º–æ—Ü–∏–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ç–æ—á–µ–∫ –∑—Ä–µ–Ω–∏—è?¬ª
‚Ä¢	¬´–ü—Ä–∏–≤–µ–¥–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –Ω–∞—É—á–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç (–∏–ª–∏ –æ–ø—Ä–æ–≤–µ—Ä–≥–∞—é—Ç) —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç¬ª.
‚Ä¢	¬´–ï—Å—Ç—å –ª–∏ –≤ —ç—Ç–æ–º —Ç–µ–∫—Å—Ç–µ —Å—Ç–µ—Ä–µ–æ—Ç–∏–ø–Ω—ã–µ –∏–ª–∏ –∫–ª–∏—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è? –ö–∞–∫–∏–µ –∏–∑ –Ω–∏—Ö —Ç—Ä–µ–±—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤?¬ª
–¢—ã –º–æ–ª–æ–¥–µ—Ü ! –ü—Ä–æ—Ö–æ–¥–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –Ω–∏–∂–µ –ø–æ –∫–Ω–æ–ø–∫–∞–º 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ 3 –º–µ—Å—è—Ü–µ–≤. –ú–æ–¥–µ–ª–∏—Ä—É–π —Å–∏—Ç—É–∞—Ü–∏–∏ –º–µ–Ω—è—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏. 
–£–¥–∞—á–∏ —Ç–µ–±–µ –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Ç–æ–º –ø–µ—Ä–µ—Ö–æ–¥–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —Ç—Ä–µ–Ω–∏–Ω–≥ –ø–æ –∫–Ω–æ–ø–∫–µ –†–µ—Ñ–ª–µ–∫—Å–∏—è —Ç–∞–º –∂–¥—É—Ç —Ç–µ–±—è –Ω–µ –º–µ–Ω–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∏ –ø–æ–ª–µ–∑–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –∑–∞–¥–∞–Ω–∏—è!
–î–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π Pomodoro —Ç–∞–π–º–µ—Ä (–∫–Ω–æ–ø–∫–∞ /pomodoro ‚Äì Pomodoro-—Ç–∞–π–º–µ—Ä)
""", reply_markup=kb)
    await ExerciseInfoTraining.answers.set()

    async with state.proxy() as data:
        data["questions"] = ["–ó–∞–¥–∞–Ω–∏–µ 1. ¬´–í—ã–¥–µ–ª–∏ –≥–ª–∞–≤–Ω–æ–µ¬ª", \
        "–ó–∞–¥–∞–Ω–∏–µ 2. ¬´–ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—è?¬ª", \
        "–ó–∞–¥–∞–Ω–∏–µ 3. ¬´–°–æ—Å—Ç–∞–≤—å –∫–∞—Ä—Ç—É –∑–Ω–∞–Ω–∏–π¬ª", \
        "–ó–∞–¥–∞–Ω–∏–µ 4. ¬´–ü—Ä–æ–±–ª–µ–º–∞ —Å —Ä–∞–∑–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω¬ª", \
        "–ó–∞–¥–∞–Ω–∏–µ 5. ¬´–í—ã—è–≤–∏ —Å–∫—Ä—ã—Ç—ã–µ —Å–º—ã—Å–ª–æ–≤—ã–µ —Å–≤—è–∑–∏¬ª", \
        "–ó–∞–¥–∞–Ω–∏–µ 6. ¬´–ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º¬ª", \
        "–ó–∞–¥–∞–Ω–∏–µ 7. ¬´–ë—ã—Å—Ç—Ä–æ–µ –∏–∑—É—á–µ–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –æ–±—ä—ë–º–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏¬ª", \
        "–ó–∞–¥–∞–Ω–∏–µ 8. ¬´–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏¬ª"]
        data["active_question"] = None
        data["all_answers"] = []
        data["only_answers"] = []

@dp.callback_query_handler(text="s:metamega")
async def metamega_quiz_handler(call: types.CallbackQuery):
    await call.message.answer("""–ü—Ä–∏–≤–µ—Ç! –ó–¥–µ—Å—å —Ç—ã –ø—Ä–æ–π–¥–µ—à—å:\n
‚Ä¢ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–≤–∏–∑—ã –ø–æ –ª—é–±–∏–º—ã–º –ø—Ä–µ–¥–º–µ—Ç–∞–º;  \n
‚Ä¢ –°–æ–∫—Ä–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è;\n  \n
‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—é.  \n
–ù–∞–∂–º–∏—Ç–µ –Ω–∞ @MetamegaQuiz_bot \n
–∏ –Ω–∞—á–Ω–∏—Ç–µ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –æ–±—É—á–µ–Ω–∏–∏!

""", reply_markup=metamega_quiz_keyboard())


@dp.message_handler(content_types="text", state=ExerciseInfoTraining.answers)
async def select_task_command_info_training(message: types.Message, state: FSMContext):

    kb = types.ReplyKeyboardMarkup()
    async with state.proxy() as data:
        if message.text == "üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é":
            await state.finish()
            await message.answer("""–ü—Ä–∏–≤–µ—Ç! –Ø, MetacogniMind_bot –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è  —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Å —Ü–µ–ª—å—é —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑–≤–∏—Ç–∏—è –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤, –≤–∫–ª—é—á–∞—è –æ—Å–æ–∑–Ω–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º—ã—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —Ä–µ—Ñ–ª–µ–∫—Å–∏—é, —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—É—á–µ–Ω–∏—è (—Ä–∞–∑–≤–∏—Ç–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –æ–±—É—á–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π. –Ø ‚Äî —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤. ü§ñ\n\n
üîπ –ú–µ–Ω—è —Å–æ–∑–¥–∞–ª–∞ –ï–ª–µ–Ω–∞ –ó–∞–ø–æ–¥–æ–π–Ω–∏–∫–æ–≤–∞, –ø—Å–∏—Ö–æ–ª–æ–≥, –Ω–µ–π—Ä–æ–ø—Å–∏—Ö–æ–ª–æ–≥, —Å–≤–æ–±–æ–¥–Ω—ã–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å, –∞—Å–ø–∏—Ä–∞–Ω—Ç-—ç–∫—Å—Ç–µ—Ä–Ω, –∞–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ ¬´–ö—É–ª—å—Ç—É—Ä–∞ –ò–ò: —É–º–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ¬ª –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å —Ç–µ–±–µ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ —É—á–∏—Ç—å—Å—è, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –ª—É—á—à–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è.  –ü–æ–¥–ø–∏—Å—ã–≤–∞–πc—è –Ω–∞ –µ—ë —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª: @eduneuro2025\n
üìå –í–∞–∂–Ω–æ: –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞. –ú–µ—Ç–æ–¥–∏–∫–∞ —è–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π, –∞–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã. 
üîπ –°–æ –º–Ω–æ–π —Ç—ã –Ω–∞—É—á–∏—à—å—Å—è:\n
üîπ ‚Äî –†–µ—Ñ–ª–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –¥–µ–Ω—å\n
üîπ ‚Äî –£–ª—É—á—à–∞—Ç—å —É—á–µ–±–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏\n
üîπ ‚Äî –†–∞–∑–≤–∏–≤–∞—Ç—å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å\n
üîπ ‚Äî –†–∞–±–æ—Ç–∞—Ç—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ\n
üîπ ‚Äî –ì–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º –±–µ–∑ —Å—Ç—Ä–µ—Å—Å–∞\n
üîπ ‚Äî –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è\n
üîπ ‚Äî –ü—Ä–∏–º–µ–Ω—è—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ç–∞–π–º-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞\n
üî• –î–∞–≤–∞–π –Ω–∞—á–Ω–µ–º! –ü—Ä–æ–π–¥–∏ 6 —Ç–µ—Å—Ç–æ–≤ –Ω–∏–∂–µ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏, —á—Ç–æ–±—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è! üî•
–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç?
1.	–ü—Ä–æ–π–¥–∏ –≤—Ö–æ–¥–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äì —ç—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —à–∞–≥ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã.
2.	–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ –ø–æ–ª—É—á–∏—à—å –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –±–æ—Ç–∞.
3.	–°–ª–µ–¥—É–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–º—É –≥—Ä–∞—Ñ–∏–∫—É (3 –∑–∞–Ω—è—Ç–∏—è –≤ –Ω–µ–¥–µ–ª—é): 
1. –ú–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
2. –¢—Ä–µ–Ω–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
3. –†–µ—Ñ–ª–µ–∫—Å–∏—è
4. Pomodoro-—Ç–∞–π–º–µ—Ä –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è 
–ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞ –±–æ—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ).
–ò—Å–ø–æ–ª—å–∑—É–π –ø–æ–¥–¥–µ—Ä–∂–∫—É: 
–ï—Å–ª–∏ —É —Ç–µ–±—è –ø—Ä–æ–±–ª–µ–º—ã —Å –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π ‚Äî –Ω–∞–ø–∏—à–∏ –≤ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —á–∞—Ç: –æ–ø–∏—à–∏ —á—Ç–æ —Ç–µ–±—è –±–µ—Å–ø–æ–∫–æ–∏—Ç –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ (/psych_chat).
üöÄ –î–∞–≤–∞–π –Ω–∞—á–Ω–µ–º! –î–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–π–¥–∏ –≤—Ö–æ–¥–Ω—ã–µ —Ç–µ—Å—Ç—ã:
    <a href="https://onlinetestpad.com/s/academic-text-skills">–¢–µ—Å—Ç 1</a>
    <a href="https://onlinetestpad.com/t/borzova-text-test">–¢–µ—Å—Ç 2</a>
    <a href="https://onlinetestpad.com/t/starkey2004-lutsenko2014">–¢–µ—Å—Ç 3</a>
    <a href="https://onlinetestpad.com/t/arpov-reflection-test">–¢–µ—Å—Ç 4</a>
    <a href="https://onlinetestpad.com/t/Metacognition-activity">–¢–µ—Å—Ç 5</a>
    <a href="https://onlinetestpad.com/t/merkulova-ak-test">–¢–µ—Å—Ç 6</a>
            """, 
            parse_mode="html", reply_markup=start_keyboard())
            return
        for i in data["questions"]:
            kb.add(i)
            kb.add(types.KeyboardButton("üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é")) 

        if not message.text in data["questions"] and data["active_question"] is None:
            await message.answer("–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω–æ –∏–∑ –∑–∞–¥–∞–Ω–∏–π –ø–æ –∫–Ω–æ–ø–∫–∞–º –Ω–∏–∂–µ", reply_markup=kb)
            return
        
        if message.text in data["questions"] and data["active_question"] is None:
            if message.text ==  "–ó–∞–¥–∞–Ω–∏–µ 1. ¬´–í—ã–¥–µ–ª–∏ –≥–ª–∞–≤–Ω–æ–µ¬ª":
                data["amount_of_questions"] = 5
                data["n"] = 1

            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 2. ¬´–ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—è?¬ª":
                data["amount_of_questions"] = 4
                data["n"] = 2

            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 3. ¬´–°–æ—Å—Ç–∞–≤—å –∫–∞—Ä—Ç—É –∑–Ω–∞–Ω–∏–π¬ª":
                data["amount_of_questions"] = 3
                data["n"] = 3

            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 4. ¬´–ü—Ä–æ–±–ª–µ–º–∞ —Å —Ä–∞–∑–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω¬ª":
                data["amount_of_questions"] = 4
                data["n"] = 4
            
            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 5. ¬´–í—ã—è–≤–∏ —Å–∫—Ä—ã—Ç—ã–µ —Å–º—ã—Å–ª–æ–≤—ã–µ —Å–≤—è–∑–∏¬ª":
                data["amount_of_questions"] = 4
                data["n"] = 5

            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 6. ¬´–ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º¬ª":
                data["amount_of_questions"] = 4
                data["n"] = 6

            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 7. ¬´–ë—ã—Å—Ç—Ä–æ–µ –∏–∑—É—á–µ–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –æ–±—ä—ë–º–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏¬ª":
                data["amount_of_questions"] = 4
                data["n"] = 7

            elif message.text == "–ó–∞–¥–∞–Ω–∏–µ 8. ¬´–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏¬ª":
                data["amount_of_questions"] = 5
                data["n"] = 8


            data["all_answers"].append(message.text)

            data["count"] = 1

            data["questions"].remove(message.text)
            data["active_question"] = message.text
            data["dct"] = info_training_dict[message.text]
            for i in data["dct"]:
                await message.answer(i)
                data["all_answers"].append(i)
                data["all_answers"].append(data["dct"][i][0])
                await message.answer(data["dct"][i][0])
            data["answers"] = []
            return
        
        if not message.text in data["questions"] and data["active_question"] is not None:

            if len(message.text.split()) < 6:
                await message.answer("–ù–∞–ø–∏—à–∏ –±–æ–ª–µ–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –Ω–µ –º–µ–Ω–µ–µ 6 —Å–ª–æ–≤")
                return
            
            if data["count"] == data["amount_of_questions"]:
                
                await message.answer("–¢—ã –º–æ–ª–æ–¥–µ—Ü, –æ—Ç–ª–∏—á–Ω–æ –æ—Ç–≤–µ—á–∞–µ—à—å –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã. –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!", reply_markup=kb)
                data["all_answers"].append(message.text)
                data["only_answers"].append(message.text)
                data["active_question"] = None


                dat = "\n".join(data["all_answers"])

                messages = [
                    {"role": "user", "content": "–ü—Ä–∏–≤–µ—Ç. –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –ø—Å–∏—Ö–æ–ª–æ–≥ –∏ –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è —ç—Ç–∏–º —É–∂–µ 40 –ª–µ—Ç. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–∞–ª —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –°–µ–π—á–∞—Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–π —Ç—Ä–µ–Ω–∏–Ω–≥. –ù–∏–∂–µ –±—É–¥—É—Ç –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –∫ –Ω–µ–º—É"},
                    {"role": "user", "content": dat}
                ]

                if len(data["questions"]) == 0:
                    res = await ask_gpt(messages=messages)
                    await message.answer(res, reply_markup=main_menu_keyboard())
                    async with session_factory() as session:
                        stmt = insert(InfoTraining).values(user_id=message.from_user.id, answers="RAZDELITEL".join(data["all_answers"]))
                        await session.execute(statement=stmt)
                        await session.commit()
                    await state.finish()
                return
            
            data["all_answers"].append(message.text)
            data["only_answers"].append(message.text)
            for i in data["dct"]:
                await message.answer(data["dct"][i][data["count"]])
                data["all_answers"].append(data["dct"][i][data["count"]])
                
            data["count"] += 1





@dp.message_handler(commands="psych_chat")
async def psych_chat(message: types.Message, state: FSMContext):
    await NeuroChat.is_chat.set()
    async with state.proxy() as data:
        data["messages"] = [{"role": "user", "content": "–¢—ã –ø—Å–∏—Ö–æ–ª–æ–≥ –≤ —á–∞—Ç –±–æ—Ç–µ, –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–±–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è, —è–≤–ª—è—é—Ç—Å—è –µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –∏ —Ç–≤–æ–∏–º –æ—Ç–≤–µ—Ç–æ–º. –ò–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –∞ –ø–æ—Ç–æ–º —Ç–≤–æ–π –æ—Ç–≤–µ—Ç. –ù–µ –æ—Ç–≤–µ—á–∞–π –Ω–∏—á–µ–≥–æ, –ø–æ–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–π –µ–≥–æ. –ü–æ–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–π –µ–≥–æ –∫–∞–∫ –ø—Å–∏—Ö–æ–ª–æ–≥ –∏ –æ–±—ä—è–≤–∏ –æ –Ω–∞—á–∞–ª–µ —Å–µ–∞–Ω—Å–∞, –∑–∞–¥–∞–π –∫–∞–∫–∏–µ-–Ω–∏–±—É–¥—å –≤–æ–ø—Ä–æ—Å—ã, –ø—Ä–æ–≤–µ–¥–∏ –ø–æ–ª–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º"}]
        res = await ask_gpt(messages=data["messages"])
        data["messages"].append({"role": "user", "content": res})
    await message.answer("–ß–∞—Ç —Å –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º –Ω–∞—á–∞–ª—Å—è!\n–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–æ—Å–ø–æ–ª—å–∑—É–π—Å—è –∫–æ–º–∞–Ω–¥–æ–π /psych_chat")
    await message.answer(res)

@dp.message_handler(content_types="any", state=NeuroChat)
async def chat_with_gpt_psych(message: types.Message, state: FSMContext):
    if message.text is None:
        await message.answer("–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —è –ø–æ–∫–∞ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—é —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é")
        return
    
    if message.text == "/psych_chat":
        await state.finish()
        await message.answer("–ß–∞—Ç —Å –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω, –∂–¥–µ–º —Ç–µ–±—è –∑–∞–≤—Ç—Ä–∞!\n–î–ª—è –Ω–∞—á–∞–ª–∞ —á–∞—Ç–∞ —Å –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—É /psych_chat", reply_markup=main_menu_keyboard())
        return
    
    async with state.proxy() as data:
        data["messages"].append({"role": "user", "content": message.text})
        res = await ask_gpt(messages=data["messages"])
        await message.answer(res)
        data["messages"].append({"role": "user", "content": res})





reflect_lst = ["1. –ö–∞–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Ç–µ–±–µ –¥–∞–ª–∏—Å—å –ª–µ–≥—á–µ –≤—Å–µ–≥–æ? –ü–æ—á–µ–º—É?", \
               "2. –ö–∞–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è –ø–æ–∫–∞–∑–∞–ª–∏—Å—å –Ω–∞–∏–±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–º–∏? –ß—Ç–æ –≤—ã–∑–≤–∞–ª–æ –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–∏—è?", \
                "3. –ö–∞–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–∫–∞–∑–∞–ª–∏—Å—å –Ω–∞–∏–±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π?", \
                "4. –ö–∞–∫–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π —Ç—ã –±—É–¥–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º?", \
                "5. –ö–∞–∫–∏–µ –æ—à–∏–±–∫–∏ —Ç—ã —Å–æ–≤–µ—Ä—à–∏–ª(–∞) –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π? –ö–∞–∫ –∏—Ö –º–æ–∂–Ω–æ –∏–∑–±–µ–∂–∞—Ç—å –≤ –±—É–¥—É—â–µ–º?", \
                "6. –ö–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –ø–æ–≤–ª–∏—è–ª–æ –Ω–∞ —Ç–≤–æ—ë –º—ã—à–ª–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏?", \
                "7. –ö–∞–∫ —Ç—ã –º–æ–∂–µ—à—å –ø—Ä–∏–º–µ–Ω—è—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ –≤ —É—á—ë–±–µ, —Ä–∞–±–æ—Ç–µ –∏ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –∂–∏–∑–Ω–∏?", \
                "8. –ö–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç—ã –∑–∞–º–µ—Ç–∏–ª(–∞) –≤ —Å–≤–æ—ë–º —É–º–µ–Ω–∏–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é?", \
                "9. –ö–∞–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Ç–µ–±–µ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∏–ª–∏ —É–ª—É—á—à–∏—Ç—å? –ü–æ—á–µ–º—É?", \
                "10. –ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å —Ç–≤–æ—ë –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π?"]


@dp.message_handler(commands="reflect")
async def reflect_command(message: types.Message, state: FSMContext):
    await message.answer("""–ü—Ä–∏–≤–µ—Ç! –¢—ã —Å–ª–∞–≤–Ω–æ –ø–æ—Ç—Ä—É–¥–∏–ª—Å—è –ø—Ä–æ–π–¥—è –∑–∞–Ω—è—Ç–∏—è, —Ç–µ–ø–µ—Ä—å –≤–∞–∂–Ω–æ –∑–∞–∫—Ä–µ–ø–∏—Ç—å –Ω–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ —Å –ø–æ–º–æ—â—å—é —Ä–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
–ù–∞—á–Ω–µ–º‚Ä¶""")
    
    await Reflect.qiestions.set()

    async with state.proxy() as data:
        data["index"] = 1
        data["answers"] = []

    await message.answer(reflect_lst[0])
    
@dp.message_handler(commands=["s"], state=Reflect)
async def asdkfjsdf(message: types.Message, state: FSMContext):
    await state.finish()


@dp.message_handler(content_types="text", state=Reflect)
async def reflect_answers(message: types.Message, state: FSMContext):
    async with state.proxy() as data:
        if data["index"] == len(reflect_lst):
            print(data["answers"])
            data["answers"].append(message.text)
            async with session_factory() as session:
                stmt = insert(ReflectAnswers).values(
                    user_id=message.from_user.id,
                    answers="RAZDELITEL".join(data["answers"])
                )
                await session.execute(statement=stmt)
                await session.commit()

            await state.finish()
            await message.answer(
                """–°–ø–∞—Å–∏–±–æ –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è! –ù–∞–¥–µ—é—Å—å —Ç–µ–±–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å. 
–ó–∞–Ω–∏–º–∞–π—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é –∏ –Ω–µ –∑–∞–±—ã–≤–∞–π —Ä–µ—Ñ–ª–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å. 
–¢–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–π —Ç–∞–π–º–µ—Ä Pomodoro –ø–æ –∫–Ω–æ–ø–∫–µ /pomodoro ‚Äì Pomodoro-—Ç–∞–π–º–µ—Ä. 
–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–æ–±—â–∞–π—Å—è —Å –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º /psych_chat ‚Äì –ß–∞—Ç —Å –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º –∏ –Ω–µ –∑–∞–±—É–¥—å –ø—Ä–æ–π—Ç–∏ –∏—Ç–æ–≥–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ 3 –º–µ—Å—è—Ü–µ–≤.""")
            pr_lst = []
            for i in range(len(reflect_lst)):
                pr_lst.append(reflect_lst[i])
                pr_lst.append(data["answers"][i])
            pr_lst = "\n".join(pr_lst)

            messages = [
                {"role": "user", "content": "–ü—Ä–∏–≤–µ—Ç. –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –ø—Å–∏—Ö–æ–ª–æ–≥ –∏ –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è —ç—Ç–∏–º —É–∂–µ 40 –ª–µ—Ç. "
                                             "–¢–æ–ª—å–∫–æ —á—Ç–æ –±—ã–ª–∞ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞ —Ä–µ—Ñ–ª–µ–∫—Å–∏—è, —Å–µ–π—á–∞—Å —è —Ç–µ–±–µ –≤—Å–µ —Å–∫–∏–Ω—É. "
                                             "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–∞–ª —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."},
                {"role": "user", "content": pr_lst}
            ]
            res = await ask_gpt(messages=messages)
            await message.answer(res, reply_markup=main_menu_keyboard())
            
            # Exit the handler since the final question has been processed
            return

    if len(message.text.split()) < 6:
        await message.answer("–ù–∞–ø–∏—à–∏ –±–æ–ª–µ–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –Ω–µ –º–µ–Ω–µ–µ 6 —Å–ª–æ–≤")
        return

    async with state.proxy() as data:
        await message.answer(reflect_lst[data["index"]])
        data["index"] += 1
        data["answers"].append(message.text)

@dp.message_handler(commands="profile")
async def profile_command(message: types.Message):
    await profile_logic(message=message, user_id=message.from_user.id)





async def profile_logic(message: types.Message, user_id: int):
    async with session_factory() as session: 
        stmt = select(Train.answers).where(Train.user_id == user_id)
        res = await session.execute(statement=stmt)
        res = res.scalars().all()
        if res is not None:
            res1 = []
            for i in res:
                res1.append("\n".join(i.split("RAZDELITEL")))

        else:
            res1 = ["–¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞ –Ω–µ—Ç"]
    


        stmt = select(InfoTraining.answers).where(InfoTraining.user_id == user_id)
        res = await session.execute(statement=stmt)
        res = res.scalars().all()
        if res is not None:
            res_t_1 = []
            for i in res:
                res_t_1.append("\n".join(i.split("RAZDELITEL")))

        else:
            res_t_1 = ["–¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞ –Ω–µ—Ç"]



        stmt = select(ReflectAnswers.answers).where(ReflectAnswers.user_id == user_id)
        res = await session.execute(statement=stmt)
        res = res.scalars().all()
        if res is not None:
            ref = []
            for i in res:
                ref.append("\n".join(i.split("RAZDELITEL")))

        else:
            ref = ["–¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞ –Ω–µ—Ç"]

        

        messages = [
            {"role": "user", "content": "–ü—Ä–∏–≤–µ—Ç. –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –ø—Å–∏—Ö–æ–ª–æ–≥ –∏ –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è —ç—Ç–∏–º —É–∂–µ 40 –ª–µ—Ç. –¢—ã –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —à–∫–æ–ª—å–Ω–∏–∫–æ–≤ –∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Å —Ü–µ–ª—å—é —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑–≤–∏—Ç–∏—è –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤, –≤–∫–ª—é—á–∞—è –æ—Å–æ–∑–Ω–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º—ã—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —Ä–µ—Ñ–ª–µ–∫—Å–∏—é, —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—É—á–µ–Ω–∏—è (—Ä–∞–∑–≤–∏—Ç–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –æ–±—É—á–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π. –°–µ–π—á–∞—Å —Ç–µ–±–µ –ø–µ—Ä–µ–¥–∞—Å—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –º–µ—Ç–∞–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–µ–Ω–∏–Ω–≥–æ–≤, —Ç—Ä–µ–Ω–∏–Ω–≥–æ–≤ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏ —Ä–µ—Ñ–ª–µ–∫—Å–∏–π, –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –¥–∞–π —Å–≤–æ–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ –±—É–¥—É—Ç –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–∏–∂–µ."}
        ]

        for i in res1:
            messages.append({"role": "user", "content": i})

        for i in res_t_1:
            messages.append({"role": "user", "content": i})

        for i in ref:
            messages.append({"role": "user", "content": i})

        ans = await ask_gpt(messages=messages)
        await message.answer(ans, reply_markup=main_menu_keyboard())


@dp.message_handler(commands="retest")
async def retest_command(message: types.Message):
    await retest_logic(message=message, user_id=message.from_user.id)


async def retest_logic(message: types.Message, user_id: int):
    async with session_factory() as session:
        stmt = select(User.datetime).where(User.user_id == user_id)
        r = await session.execute(statement=stmt)
        date = r.scalar()

    date_format = "%Y-%m-%d"
    d1 = datetime.datetime.strptime(date, date_format)
    d2 = datetime.datetime.strptime(datetime.datetime.now().strftime('%Y-%m-%d'), date_format)
    
    days = abs((d2 - d1).days)

    if days <= 90:
        await message.answer("–¢—ã –ø–æ–∫–∞ —á—Ç–æ –Ω–µ –º–æ–∂–µ—à—å –ø–µ—Ä–µ–ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ —Ç—Ä–∏ –º–µ—Å—è—Ü–∞!!!", reply_markup=main_menu_keyboard())
    else:
        await message.answer("""–í–æ—Ç —Ç–µ–±–µ —Å—Å—ã–ª–æ—á–∫–∏ –Ω–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
    <a href="https://onlinetestpad.com/s/Competence-after-chatbot">–¢–µ—Å—Ç 1</a>
    <a href="https://onlinetestpad.com/t/borzova-text-test">–¢–µ—Å—Ç 2</a>
    <a href="https://onlinetestpad.com/t/starkey2004-lutsenko2014">–¢–µ—Å—Ç 3</a>
    <a href="https://onlinetestpad.com/t/arpov-reflection-test">–¢–µ—Å—Ç 4</a>
    <a href="https://onlinetestpad.com/t/Metacognition-activity">–¢–µ—Å—Ç 5</a>
    <a href="https://onlinetestpad.com/t/merkulova-ak-test">–¢–µ—Å—Ç 6</a>""", parse_mode="html", reply_markup=main_menu_keyboard())


if __name__ == "__main__":
    executor.start_polling(dp, skip_updates=True, on_startup=on_startup)